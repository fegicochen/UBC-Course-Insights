{"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/Dataset.ts":{"path":"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/Dataset.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":126}},"4":{"start":{"line":7,"column":16},"end":{"line":7,"column":49}},"5":{"start":{"line":8,"column":25},"end":{"line":8,"column":52}},"6":{"start":{"line":9,"column":0},"end":{"line":9,"column":26}},"7":{"start":{"line":11,"column":0},"end":{"line":22,"column":62}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":31}},"9":{"start":{"line":13,"column":4},"end":{"line":13,"column":27}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":33}},"11":{"start":{"line":15,"column":4},"end":{"line":15,"column":43}},"12":{"start":{"line":16,"column":4},"end":{"line":16,"column":31}},"13":{"start":{"line":17,"column":4},"end":{"line":17,"column":31}},"14":{"start":{"line":18,"column":4},"end":{"line":18,"column":29}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":31}},"16":{"start":{"line":20,"column":4},"end":{"line":20,"column":31}},"17":{"start":{"line":21,"column":4},"end":{"line":21,"column":33}},"18":{"start":{"line":23,"column":0},"end":{"line":23,"column":99}},"19":{"start":{"line":24,"column":0},"end":{"line":24,"column":104}},"20":{"start":{"line":25,"column":0},"end":{"line":47,"column":2}},"21":{"start":{"line":50,"column":28},"end":{"line":50,"column":94}},"22":{"start":{"line":51,"column":8},"end":{"line":51,"column":40}},"23":{"start":{"line":54,"column":25},"end":{"line":54,"column":35}},"24":{"start":{"line":55,"column":8},"end":{"line":55,"column":70}},"25":{"start":{"line":55,"column":51},"end":{"line":55,"column":68}},"26":{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},"27":{"start":{"line":59,"column":12},"end":{"line":59,"column":25}},"28":{"start":{"line":61,"column":8},"end":{"line":61,"column":20}},"29":{"start":{"line":64,"column":32},"end":{"line":64,"column":46}},"30":{"start":{"line":65,"column":47},"end":{"line":65,"column":48}},"31":{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},"32":{"start":{"line":67,"column":12},"end":{"line":67,"column":29}},"33":{"start":{"line":69,"column":25},"end":{"line":69,"column":43}},"34":{"start":{"line":69,"column":54},"end":{"line":69,"column":72}},"35":{"start":{"line":70,"column":8},"end":{"line":72,"column":9}},"36":{"start":{"line":70,"column":76},"end":{"line":70,"column":88}},"37":{"start":{"line":71,"column":12},"end":{"line":71,"column":29}},"38":{"start":{"line":73,"column":8},"end":{"line":76,"column":10}},"39":{"start":{"line":79,"column":32},"end":{"line":79,"column":46}},"40":{"start":{"line":80,"column":47},"end":{"line":80,"column":48}},"41":{"start":{"line":81,"column":8},"end":{"line":83,"column":9}},"42":{"start":{"line":82,"column":12},"end":{"line":82,"column":29}},"43":{"start":{"line":84,"column":25},"end":{"line":84,"column":43}},"44":{"start":{"line":84,"column":54},"end":{"line":84,"column":72}},"45":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"46":{"start":{"line":85,"column":76},"end":{"line":85,"column":88}},"47":{"start":{"line":86,"column":12},"end":{"line":86,"column":29}},"48":{"start":{"line":88,"column":8},"end":{"line":91,"column":10}},"49":{"start":{"line":94,"column":26},"end":{"line":94,"column":45}},"50":{"start":{"line":95,"column":8},"end":{"line":100,"column":9}},"51":{"start":{"line":96,"column":12},"end":{"line":96,"column":29}},"52":{"start":{"line":99,"column":12},"end":{"line":99,"column":39}},"53":{"start":{"line":103,"column":8},"end":{"line":105,"column":9}},"54":{"start":{"line":104,"column":12},"end":{"line":104,"column":25}},"55":{"start":{"line":106,"column":8},"end":{"line":106,"column":108}},"56":{"start":{"line":106,"column":43},"end":{"line":106,"column":92}},"57":{"start":{"line":109,"column":8},"end":{"line":111,"column":9}},"58":{"start":{"line":110,"column":12},"end":{"line":110,"column":25}},"59":{"start":{"line":112,"column":8},"end":{"line":112,"column":108}},"60":{"start":{"line":112,"column":43},"end":{"line":112,"column":92}},"61":{"start":{"line":115,"column":26},"end":{"line":115,"column":35}},"62":{"start":{"line":116,"column":8},"end":{"line":123,"column":11}},"63":{"start":{"line":117,"column":12},"end":{"line":122,"column":13}},"64":{"start":{"line":117,"column":63},"end":{"line":117,"column":80}},"65":{"start":{"line":118,"column":16},"end":{"line":118,"column":35}},"66":{"start":{"line":121,"column":16},"end":{"line":121,"column":88}},"67":{"start":{"line":124,"column":26},"end":{"line":124,"column":28}},"68":{"start":{"line":125,"column":8},"end":{"line":129,"column":11}},"69":{"start":{"line":126,"column":12},"end":{"line":128,"column":13}},"70":{"start":{"line":127,"column":16},"end":{"line":127,"column":60}},"71":{"start":{"line":130,"column":8},"end":{"line":132,"column":9}},"72":{"start":{"line":131,"column":12},"end":{"line":131,"column":108}},"73":{"start":{"line":133,"column":28},"end":{"line":133,"column":37}},"74":{"start":{"line":134,"column":8},"end":{"line":139,"column":11}},"75":{"start":{"line":135,"column":26},"end":{"line":135,"column":40}},"76":{"start":{"line":136,"column":12},"end":{"line":138,"column":13}},"77":{"start":{"line":137,"column":16},"end":{"line":137,"column":50}},"78":{"start":{"line":140,"column":8},"end":{"line":140,"column":27}},"79":{"start":{"line":143,"column":28},"end":{"line":143,"column":37}},"80":{"start":{"line":144,"column":8},"end":{"line":149,"column":11}},"81":{"start":{"line":145,"column":37},"end":{"line":145,"column":67}},"82":{"start":{"line":145,"column":54},"end":{"line":145,"column":66}},"83":{"start":{"line":146,"column":12},"end":{"line":148,"column":13}},"84":{"start":{"line":147,"column":16},"end":{"line":147,"column":44}},"85":{"start":{"line":150,"column":8},"end":{"line":155,"column":11}},"86":{"start":{"line":151,"column":45},"end":{"line":151,"column":48}},"87":{"start":{"line":152,"column":12},"end":{"line":154,"column":13}},"88":{"start":{"line":153,"column":16},"end":{"line":153,"column":85}},"89":{"start":{"line":156,"column":8},"end":{"line":156,"column":27}},"90":{"start":{"line":159,"column":8},"end":{"line":161,"column":9}},"91":{"start":{"line":160,"column":12},"end":{"line":160,"column":133}},"92":{"start":{"line":162,"column":8},"end":{"line":162,"column":19}},"93":{"start":{"line":165,"column":8},"end":{"line":167,"column":9}},"94":{"start":{"line":166,"column":12},"end":{"line":166,"column":133}},"95":{"start":{"line":168,"column":8},"end":{"line":168,"column":19}},"96":{"start":{"line":171,"column":8},"end":{"line":173,"column":9}},"97":{"start":{"line":172,"column":12},"end":{"line":172,"column":133}},"98":{"start":{"line":174,"column":8},"end":{"line":174,"column":19}},"99":{"start":{"line":177,"column":8},"end":{"line":179,"column":9}},"100":{"start":{"line":178,"column":12},"end":{"line":178,"column":141}},"101":{"start":{"line":180,"column":8},"end":{"line":180,"column":19}},"102":{"start":{"line":184,"column":8},"end":{"line":189,"column":9}},"103":{"start":{"line":185,"column":12},"end":{"line":185,"column":88}},"104":{"start":{"line":188,"column":12},"end":{"line":188,"column":82}},"105":{"start":{"line":190,"column":8},"end":{"line":190,"column":24}},"106":{"start":{"line":193,"column":8},"end":{"line":193,"column":63}},"107":{"start":{"line":193,"column":57},"end":{"line":193,"column":61}},"108":{"start":{"line":196,"column":8},"end":{"line":196,"column":56}},"109":{"start":{"line":199,"column":0},"end":{"line":199,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":1},"end":{"line":11,"column":2}},"loc":{"start":{"line":11,"column":22},"end":{"line":22,"column":1}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":49,"column":4},"end":{"line":49,"column":5}},"loc":{"start":{"line":49,"column":33},"end":{"line":52,"column":5}},"line":49},"3":{"name":"(anonymous_3)","decl":{"start":{"line":53,"column":4},"end":{"line":53,"column":5}},"loc":{"start":{"line":53,"column":37},"end":{"line":56,"column":5}},"line":53},"4":{"name":"(anonymous_4)","decl":{"start":{"line":55,"column":38},"end":{"line":55,"column":39}},"loc":{"start":{"line":55,"column":51},"end":{"line":55,"column":68}},"line":55},"5":{"name":"(anonymous_5)","decl":{"start":{"line":57,"column":4},"end":{"line":57,"column":5}},"loc":{"start":{"line":57,"column":37},"end":{"line":62,"column":5}},"line":57},"6":{"name":"(anonymous_6)","decl":{"start":{"line":63,"column":4},"end":{"line":63,"column":5}},"loc":{"start":{"line":63,"column":26},"end":{"line":77,"column":5}},"line":63},"7":{"name":"(anonymous_7)","decl":{"start":{"line":70,"column":69},"end":{"line":70,"column":70}},"loc":{"start":{"line":70,"column":76},"end":{"line":70,"column":88}},"line":70},"8":{"name":"(anonymous_8)","decl":{"start":{"line":78,"column":4},"end":{"line":78,"column":5}},"loc":{"start":{"line":78,"column":26},"end":{"line":92,"column":5}},"line":78},"9":{"name":"(anonymous_9)","decl":{"start":{"line":85,"column":69},"end":{"line":85,"column":70}},"loc":{"start":{"line":85,"column":76},"end":{"line":85,"column":88}},"line":85},"10":{"name":"(anonymous_10)","decl":{"start":{"line":93,"column":4},"end":{"line":93,"column":5}},"loc":{"start":{"line":93,"column":29},"end":{"line":101,"column":5}},"line":93},"11":{"name":"(anonymous_11)","decl":{"start":{"line":102,"column":4},"end":{"line":102,"column":5}},"loc":{"start":{"line":102,"column":23},"end":{"line":107,"column":5}},"line":102},"12":{"name":"(anonymous_12)","decl":{"start":{"line":106,"column":36},"end":{"line":106,"column":37}},"loc":{"start":{"line":106,"column":43},"end":{"line":106,"column":92}},"line":106},"13":{"name":"(anonymous_13)","decl":{"start":{"line":108,"column":4},"end":{"line":108,"column":5}},"loc":{"start":{"line":108,"column":23},"end":{"line":113,"column":5}},"line":108},"14":{"name":"(anonymous_14)","decl":{"start":{"line":112,"column":36},"end":{"line":112,"column":37}},"loc":{"start":{"line":112,"column":43},"end":{"line":112,"column":92}},"line":112},"15":{"name":"(anonymous_15)","decl":{"start":{"line":114,"column":4},"end":{"line":114,"column":5}},"loc":{"start":{"line":114,"column":39},"end":{"line":141,"column":5}},"line":114},"16":{"name":"(anonymous_16)","decl":{"start":{"line":116,"column":33},"end":{"line":116,"column":34}},"loc":{"start":{"line":116,"column":42},"end":{"line":123,"column":9}},"line":116},"17":{"name":"(anonymous_17)","decl":{"start":{"line":117,"column":26},"end":{"line":117,"column":27}},"loc":{"start":{"line":117,"column":63},"end":{"line":117,"column":80}},"line":117},"18":{"name":"(anonymous_18)","decl":{"start":{"line":125,"column":21},"end":{"line":125,"column":22}},"loc":{"start":{"line":125,"column":57},"end":{"line":129,"column":9}},"line":125},"19":{"name":"(anonymous_19)","decl":{"start":{"line":134,"column":21},"end":{"line":134,"column":22}},"loc":{"start":{"line":134,"column":58},"end":{"line":139,"column":9}},"line":134},"20":{"name":"(anonymous_20)","decl":{"start":{"line":142,"column":4},"end":{"line":142,"column":5}},"loc":{"start":{"line":142,"column":37},"end":{"line":157,"column":5}},"line":142},"21":{"name":"(anonymous_21)","decl":{"start":{"line":144,"column":36},"end":{"line":144,"column":37}},"loc":{"start":{"line":144,"column":54},"end":{"line":149,"column":9}},"line":144},"22":{"name":"(anonymous_22)","decl":{"start":{"line":145,"column":47},"end":{"line":145,"column":48}},"loc":{"start":{"line":145,"column":54},"end":{"line":145,"column":66}},"line":145},"23":{"name":"(anonymous_23)","decl":{"start":{"line":150,"column":21},"end":{"line":150,"column":22}},"loc":{"start":{"line":150,"column":30},"end":{"line":155,"column":9}},"line":150},"24":{"name":"(anonymous_24)","decl":{"start":{"line":158,"column":4},"end":{"line":158,"column":5}},"loc":{"start":{"line":158,"column":39},"end":{"line":163,"column":5}},"line":158},"25":{"name":"(anonymous_25)","decl":{"start":{"line":164,"column":4},"end":{"line":164,"column":5}},"loc":{"start":{"line":164,"column":39},"end":{"line":169,"column":5}},"line":164},"26":{"name":"(anonymous_26)","decl":{"start":{"line":170,"column":4},"end":{"line":170,"column":5}},"loc":{"start":{"line":170,"column":38},"end":{"line":175,"column":5}},"line":170},"27":{"name":"(anonymous_27)","decl":{"start":{"line":176,"column":4},"end":{"line":176,"column":5}},"loc":{"start":{"line":176,"column":39},"end":{"line":181,"column":5}},"line":176},"28":{"name":"(anonymous_28)","decl":{"start":{"line":182,"column":4},"end":{"line":182,"column":5}},"loc":{"start":{"line":182,"column":45},"end":{"line":191,"column":5}},"line":182},"29":{"name":"(anonymous_29)","decl":{"start":{"line":192,"column":4},"end":{"line":192,"column":5}},"loc":{"start":{"line":192,"column":31},"end":{"line":194,"column":5}},"line":192},"30":{"name":"(anonymous_30)","decl":{"start":{"line":193,"column":50},"end":{"line":193,"column":51}},"loc":{"start":{"line":193,"column":57},"end":{"line":193,"column":61}},"line":193},"31":{"name":"(anonymous_31)","decl":{"start":{"line":195,"column":4},"end":{"line":195,"column":5}},"loc":{"start":{"line":195,"column":37},"end":{"line":197,"column":5}},"line":195}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":22,"column":15},"end":{"line":22,"column":60}},"type":"binary-expr","locations":[{"start":{"line":22,"column":15},"end":{"line":22,"column":32}},{"start":{"line":22,"column":37},"end":{"line":22,"column":59}}],"line":22},"4":{"loc":{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},"type":"if","locations":[{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},{"start":{"line":58,"column":8},"end":{"line":60,"column":9}}],"line":58},"5":{"loc":{"start":{"line":58,"column":12},"end":{"line":58,"column":60}},"type":"binary-expr","locations":[{"start":{"line":58,"column":12},"end":{"line":58,"column":34}},{"start":{"line":58,"column":38},"end":{"line":58,"column":60}}],"line":58},"6":{"loc":{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},"type":"if","locations":[{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},{"start":{"line":66,"column":8},"end":{"line":68,"column":9}}],"line":66},"7":{"loc":{"start":{"line":70,"column":8},"end":{"line":72,"column":9}},"type":"if","locations":[{"start":{"line":70,"column":8},"end":{"line":72,"column":9}},{"start":{"line":70,"column":8},"end":{"line":72,"column":9}}],"line":70},"8":{"loc":{"start":{"line":70,"column":12},"end":{"line":70,"column":89}},"type":"binary-expr","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":43}},{"start":{"line":70,"column":47},"end":{"line":70,"column":89}}],"line":70},"9":{"loc":{"start":{"line":81,"column":8},"end":{"line":83,"column":9}},"type":"if","locations":[{"start":{"line":81,"column":8},"end":{"line":83,"column":9}},{"start":{"line":81,"column":8},"end":{"line":83,"column":9}}],"line":81},"10":{"loc":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},{"start":{"line":85,"column":8},"end":{"line":87,"column":9}}],"line":85},"11":{"loc":{"start":{"line":85,"column":12},"end":{"line":85,"column":89}},"type":"binary-expr","locations":[{"start":{"line":85,"column":12},"end":{"line":85,"column":43}},{"start":{"line":85,"column":47},"end":{"line":85,"column":89}}],"line":85},"12":{"loc":{"start":{"line":95,"column":8},"end":{"line":100,"column":9}},"type":"if","locations":[{"start":{"line":95,"column":8},"end":{"line":100,"column":9}},{"start":{"line":95,"column":8},"end":{"line":100,"column":9}}],"line":95},"13":{"loc":{"start":{"line":103,"column":8},"end":{"line":105,"column":9}},"type":"if","locations":[{"start":{"line":103,"column":8},"end":{"line":105,"column":9}},{"start":{"line":103,"column":8},"end":{"line":105,"column":9}}],"line":103},"14":{"loc":{"start":{"line":106,"column":50},"end":{"line":106,"column":91}},"type":"cond-expr","locations":[{"start":{"line":106,"column":76},"end":{"line":106,"column":79}},{"start":{"line":106,"column":82},"end":{"line":106,"column":91}}],"line":106},"15":{"loc":{"start":{"line":109,"column":8},"end":{"line":111,"column":9}},"type":"if","locations":[{"start":{"line":109,"column":8},"end":{"line":111,"column":9}},{"start":{"line":109,"column":8},"end":{"line":111,"column":9}}],"line":109},"16":{"loc":{"start":{"line":112,"column":50},"end":{"line":112,"column":91}},"type":"cond-expr","locations":[{"start":{"line":112,"column":76},"end":{"line":112,"column":79}},{"start":{"line":112,"column":82},"end":{"line":112,"column":91}}],"line":112},"17":{"loc":{"start":{"line":117,"column":12},"end":{"line":122,"column":13}},"type":"if","locations":[{"start":{"line":117,"column":12},"end":{"line":122,"column":13}},{"start":{"line":117,"column":12},"end":{"line":122,"column":13}}],"line":117},"18":{"loc":{"start":{"line":126,"column":12},"end":{"line":128,"column":13}},"type":"if","locations":[{"start":{"line":126,"column":12},"end":{"line":128,"column":13}},{"start":{"line":126,"column":12},"end":{"line":128,"column":13}}],"line":126},"19":{"loc":{"start":{"line":126,"column":16},"end":{"line":126,"column":62}},"type":"binary-expr","locations":[{"start":{"line":126,"column":16},"end":{"line":126,"column":33}},{"start":{"line":126,"column":37},"end":{"line":126,"column":62}}],"line":126},"20":{"loc":{"start":{"line":130,"column":8},"end":{"line":132,"column":9}},"type":"if","locations":[{"start":{"line":130,"column":8},"end":{"line":132,"column":9}},{"start":{"line":130,"column":8},"end":{"line":132,"column":9}}],"line":130},"21":{"loc":{"start":{"line":136,"column":12},"end":{"line":138,"column":13}},"type":"if","locations":[{"start":{"line":136,"column":12},"end":{"line":138,"column":13}},{"start":{"line":136,"column":12},"end":{"line":138,"column":13}}],"line":136},"22":{"loc":{"start":{"line":136,"column":16},"end":{"line":136,"column":63}},"type":"binary-expr","locations":[{"start":{"line":136,"column":16},"end":{"line":136,"column":40}},{"start":{"line":136,"column":44},"end":{"line":136,"column":63}}],"line":136},"23":{"loc":{"start":{"line":146,"column":12},"end":{"line":148,"column":13}},"type":"if","locations":[{"start":{"line":146,"column":12},"end":{"line":148,"column":13}},{"start":{"line":146,"column":12},"end":{"line":148,"column":13}}],"line":146},"24":{"loc":{"start":{"line":152,"column":12},"end":{"line":154,"column":13}},"type":"if","locations":[{"start":{"line":152,"column":12},"end":{"line":154,"column":13}},{"start":{"line":152,"column":12},"end":{"line":154,"column":13}}],"line":152},"25":{"loc":{"start":{"line":152,"column":16},"end":{"line":152,"column":58}},"type":"binary-expr","locations":[{"start":{"line":152,"column":16},"end":{"line":152,"column":27}},{"start":{"line":152,"column":31},"end":{"line":152,"column":58}}],"line":152},"26":{"loc":{"start":{"line":159,"column":8},"end":{"line":161,"column":9}},"type":"if","locations":[{"start":{"line":159,"column":8},"end":{"line":161,"column":9}},{"start":{"line":159,"column":8},"end":{"line":161,"column":9}}],"line":159},"27":{"loc":{"start":{"line":165,"column":8},"end":{"line":167,"column":9}},"type":"if","locations":[{"start":{"line":165,"column":8},"end":{"line":167,"column":9}},{"start":{"line":165,"column":8},"end":{"line":167,"column":9}}],"line":165},"28":{"loc":{"start":{"line":171,"column":8},"end":{"line":173,"column":9}},"type":"if","locations":[{"start":{"line":171,"column":8},"end":{"line":173,"column":9}},{"start":{"line":171,"column":8},"end":{"line":173,"column":9}}],"line":171},"29":{"loc":{"start":{"line":177,"column":8},"end":{"line":179,"column":9}},"type":"if","locations":[{"start":{"line":177,"column":8},"end":{"line":179,"column":9}},{"start":{"line":177,"column":8},"end":{"line":179,"column":9}}],"line":177},"30":{"loc":{"start":{"line":177,"column":12},"end":{"line":177,"column":94}},"type":"binary-expr","locations":[{"start":{"line":177,"column":12},"end":{"line":177,"column":35}},{"start":{"line":177,"column":39},"end":{"line":177,"column":57}},{"start":{"line":177,"column":61},"end":{"line":177,"column":73}},{"start":{"line":177,"column":77},"end":{"line":177,"column":94}}],"line":177}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":0,"22":0,"23":57,"24":57,"25":228,"26":805,"27":15,"28":790,"29":523,"30":523,"31":523,"32":8,"33":515,"34":515,"35":515,"36":1740,"37":230,"38":285,"39":240,"40":240,"41":240,"42":8,"43":232,"44":232,"45":232,"46":564,"47":5,"48":227,"49":514,"50":514,"51":283,"52":231,"53":678644,"54":0,"55":678644,"56":2714414,"57":339302,"58":0,"59":339302,"60":1017858,"61":393,"62":393,"63":516,"64":1387,"65":510,"66":6,"67":387,"68":387,"69":2000,"70":10,"71":387,"72":8,"73":379,"74":379,"75":1983,"76":1983,"77":501,"78":379,"79":73862,"80":73862,"81":2454654,"82":23149187,"83":2454654,"84":752369,"85":73862,"86":752365,"87":752365,"88":3,"89":73859,"90":407173,"91":42365,"92":364808,"93":382029,"94":67851,"95":314178,"96":6152,"97":3,"98":6149,"99":74399,"100":6,"101":74393,"102":38,"103":38,"104":3,"105":35,"106":29,"107":49,"108":44,"109":1},"f":{"0":1,"1":1,"2":0,"3":57,"4":228,"5":805,"6":523,"7":1740,"8":240,"9":564,"10":514,"11":678644,"12":2714414,"13":339302,"14":1017858,"15":393,"16":516,"17":1387,"18":2000,"19":1983,"20":73862,"21":2454654,"22":23149187,"23":752365,"24":407173,"25":382029,"26":6152,"27":74399,"28":38,"29":29,"30":49,"31":44},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[1,1],"4":[15,790],"5":[805,798],"6":[8,515],"7":[230,285],"8":[515,514],"9":[8,232],"10":[5,227],"11":[232,231],"12":[283,231],"13":[0,678644],"14":[2713978,436],"15":[0,339302],"16":[1017735,123],"17":[510,6],"18":[10,1990],"19":[2000,217],"20":[8,379],"21":[501,1482],"22":[1983,501],"23":[752369,1702285],"24":[3,752362],"25":[752365,684515],"26":[42365,364808],"27":[67851,314178],"28":[3,6149],"29":[6,74393],"30":[74399,74395,74393,74393]},"inputSourceMap":{"version":3,"file":"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/Dataset.ts","sources":["/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/Dataset.ts"],"names":[],"mappings":"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","sourcesContent":["import JSZip from \"jszip\";\nimport { InsightDatasetKind, InsightError } from \"./IInsightFacade\";\n\nexport const maxResults = 5000;\n\nexport enum DatasetId {\n\tUuid = \"uuid\",\n\tId = \"id\",\n\tTitle = \"title\",\n\tInstructor = \"instructor\",\n\tDept = \"dept\",\n\tYear = \"year\",\n\tAvg = \"avg\",\n\tPass = \"pass\",\n\tFail = \"fail\",\n\tAudit = \"audit\",\n}\n\nexport interface Section {\n\tuuid: string;\n\tid: string;\n\ttitle: string;\n\tinstructor: string;\n\tdept: string;\n\tyear: number;\n\tavg: number;\n\tpass: number;\n\tfail: number;\n\taudit: number;\n}\n\nexport interface Room {\n\tfullname: string;\n\tshortname: string;\n\tnumber: string;\n\tname: string;\n\taddress: string;\n\tlat: number;\n\tlon: number;\n\tseats: number;\n\ttype: string;\n\tfurniture: string;\n\thref: string;\n}\n\nexport interface Dataset<T> {\n\tid: string;\n\tmembers: T[];\n\ttype: InsightDatasetKind;\n}\n\nexport type SectionsDataset = Dataset<Section>;\nexport type RoomsDataset = Dataset<Room>;\n\nexport interface DatasetList {\n\tsections: SectionsDataset[];\n\trooms: RoomsDataset[];\n}\n\nexport type DatasetsProvider = () => DatasetList;\n\nexport const MFields = [DatasetId.Avg, DatasetId.Pass, DatasetId.Fail, DatasetId.Audit, DatasetId.Year];\nexport const SFields = [DatasetId.Dept, DatasetId.Id, DatasetId.Instructor, DatasetId.Title, DatasetId.Uuid];\n\nexport interface InsightFacadeKey {\n\tidstring: string;\n\tfield: DatasetId;\n}\n\nexport const Keywords = {\n\tBody: \"WHERE\",\n\tOptions: \"OPTIONS\",\n\tFilter: {\n\t\tLogic: {\n\t\t\tAnd: \"AND\",\n\t\t\tOr: \"OR\",\n\t\t},\n\t\tMComparator: {\n\t\t\tLessThan: \"LT\",\n\t\t\tGreaterThan: \"GT\",\n\t\t\tEqual: \"EQ\",\n\t\t},\n\t\tSComparator: {\n\t\t\tIs: \"IS\",\n\t\t},\n\t\tNegation: {\n\t\t\tNot: \"NOT\",\n\t\t},\n\t},\n\tColumns: \"COLUMNS\",\n\tOrder: \"ORDER\",\n};\n\nexport interface OptionsState {\n\torder: InsightFacadeKey | undefined;\n\tcolumns: InsightFacadeKey[];\n\tdatasetId: string;\n}\n\nexport class DatasetUtils {\n\t/**\n\t *\n\t * @param base64 the base64 (maybe) string to validate\n\t * @returns whether it is base64 formatted or not\n\t */\n\tpublic static isValidBase64(base64: string): boolean {\n\t\t// Referenced from: https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\n\t\t// Used the regular expression provided.\n\t\tconst base64regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n\t\treturn base64regex.test(base64);\n\t}\n\n\t/**\n\t *\n\t * @param provider datasets provider\n\t * @param id id to search for\n\t * @returns undefined if not found, else the dataset with the given id\n\t */\n\tpublic static findDataset(provider: DatasetsProvider, id: string): SectionsDataset | undefined {\n\t\tconst datasets = provider();\n\t\treturn datasets.sections.find((dataset) => dataset.id === id);\n\t}\n\n\t/**\n\t * Returns false if idstring does not conform to id string guidelines.\n\t *\n\t * @param idstring string to test\n\t * @returns false if string is improperly formatted (only whitespace or contains underscoare), true otherwise\n\t */\n\tpublic static isValidIdString(idstring: string): boolean {\n\t\tif (idstring.trim() === \"\" || idstring.includes(\"_\")) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t *\n\t * @param key string to test\n\t * @returns undefined if string is improperly formatted as an mkey, id string and key split if it is valid.\n\t */\n\tpublic static parseMKey(key: string): InsightFacadeKey | undefined {\n\t\tconst splitUnderscore = key.split(\"_\");\n\t\tconst beforeAndAfterUnderscoreLength = 2;\n\t\tif (splitUnderscore.length !== beforeAndAfterUnderscoreLength) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst idstring = splitUnderscore[0],\n\t\t\tmfield = splitUnderscore[1];\n\t\tif (!this.isValidIdString(idstring) || !MFields.find((x) => x === mfield)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn {\n\t\t\tidstring: idstring,\n\t\t\tfield: mfield as DatasetId,\n\t\t};\n\t}\n\n\t/**\n\t *\n\t * @param key string to test\n\t * @returns undefined if string is improperly formatted as an skey, id string and key split if it is valid.\n\t */\n\tpublic static parseSKey(key: string): InsightFacadeKey | undefined {\n\t\tconst splitUnderscore = key.split(\"_\");\n\t\tconst beforeAndAfterUnderscoreLength = 2;\n\t\tif (splitUnderscore.length !== beforeAndAfterUnderscoreLength) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst idstring = splitUnderscore[0],\n\t\t\tsfield = splitUnderscore[1];\n\t\tif (!this.isValidIdString(idstring) || !SFields.find((x) => x === sfield)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn {\n\t\t\tidstring: idstring,\n\t\t\tfield: sfield as DatasetId,\n\t\t};\n\t}\n\n\t/**\n\t *\n\t * @param key string to test\n\t * @reutrns undefined if string is not an mkey or skey, otherwise produces id string and key split.\n\t */\n\tpublic static parseMOrSKey(key: string): InsightFacadeKey | undefined {\n\t\tconst mkeyParse = this.parseMKey(key);\n\t\tif (mkeyParse !== undefined) {\n\t\t\treturn mkeyParse;\n\t\t} else {\n\t\t\treturn this.parseSKey(key);\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param key key to test with idstring and field or string representing type (DatasetId.Audit etc)\n\t * @returns whether it is an mkey or not\n\t */\n\tpublic static isMKey(key: InsightFacadeKey | string | undefined): boolean {\n\t\tif (key === undefined) {\n\t\t\treturn false;\n\t\t}\n\t\treturn MFields.find((x) => x === (typeof key === \"string\" ? key : key.field)) !== undefined;\n\t}\n\n\t/**\n\t *\n\t * @param key key to test with idstring and field or string representing type (DatasetId.Uuid, etc)\n\t * @returns whether it is an skey or not\n\t */\n\tpublic static isSKey(key: InsightFacadeKey | string | undefined): boolean {\n\t\tif (key === undefined) {\n\t\t\treturn false;\n\t\t}\n\t\treturn SFields.find((x) => x === (typeof key === \"string\" ? key : key.field)) !== undefined;\n\t}\n\n\t/**\n\t * Ensures object is populated with only the given keys and returns a map\n\t * between keys and their values in the object. Keys are paried with boolean indicating\n\t * whether they are mandatory or not. If they are not mandatory and not found, function\n\t * will not throw.\n\t *\n\t * @param obj object to check\n\t * @param keys keys in object to retrieve paired with whether they are mandatory\n\t * @throws InsighError if key match isn't exact (extra or missing keys)\n\t */\n\tpublic static requireExactKeys(obj: object, keys: [string, boolean][]): Map<string, unknown> {\n\t\t// Check for extra keys\n\t\tconst keysFound = new Set<string>();\n\t\tObject.keys(obj).forEach((key) => {\n\t\t\tif (keys.find(([searchKey, _searchKeyRequired]) => searchKey === key) !== undefined) {\n\t\t\t\tkeysFound.add(key);\n\t\t\t} else {\n\t\t\t\tthrow new InsightError(\"Extraneous key: \" + key + \".\");\n\t\t\t}\n\t\t});\n\t\t// Check for missing keys\n\t\tlet missingKeys: string[] = [];\n\t\tkeys.forEach(([searchKey, searchKeyRequired]) => {\n\t\t\t// If key is reuqired and it is not found\n\t\t\tif (searchKeyRequired && !keysFound.has(searchKey)) {\n\t\t\t\tmissingKeys = missingKeys.concat(searchKey);\n\t\t\t}\n\t\t});\n\t\tif (missingKeys.length !== 0) {\n\t\t\tthrow new InsightError(\"Missing key(s): \" + JSON.stringify(missingKeys) + \".\");\n\t\t}\n\n\t\t// Map keys to values in object\n\t\tconst keyValueMap = new Map<string, unknown>();\n\t\tkeys.forEach(([searchKey, _searchKeyRequired]) => {\n\t\t\tconst value = obj[searchKey as keyof typeof obj];\n\t\t\tif (keysFound.has(searchKey) && value !== undefined) {\n\t\t\t\tkeyValueMap.set(searchKey, value);\n\t\t\t}\n\t\t});\n\t\treturn keyValueMap;\n\t}\n\n\t/**\n\t * Ensures object is populated with the given keys. Other keys are ignored. Options keys\n\t * are allowed to be there or not.\n\t *\n\t * @param obj object to check\n\t * @param keys keys in object to retrieve paired with whether they are mandatory or not\n\t * @throws InsightError if a required key is not found\n\t */\n\tpublic static requireHasKeys(obj: object, keys: [string, boolean][]): Map<string, unknown> {\n\t\tconst keyValueMap = new Map<string, unknown>();\n\t\tObject.entries(obj).forEach(([key, value]) => {\n\t\t\tconst matchedSearchKey = keys.find((k) => k[0] === key);\n\t\t\tif (matchedSearchKey !== undefined) {\n\t\t\t\tkeyValueMap.set(key, value);\n\t\t\t}\n\t\t});\n\t\t// Ensure keys which are required have been mapped\n\t\tkeys.forEach((key) => {\n\t\t\tconst [keyString, keyRequired] = key;\n\t\t\tif (keyRequired && !keyValueMap.has(keyString)) {\n\t\t\t\tthrow new InsightError(\"Missing key: \" + keyString);\n\t\t\t}\n\t\t});\n\t\treturn keyValueMap;\n\t}\n\n\t/**\n\t * Checks whether the given num is a number, and throws an error identified with\n\t * section when it is not.\n\t *\n\t * @param section the name of the number\n\t * @param str the variable to test\n\t * @returns num as a number\n\t * @throws InsightError if num is not an number\n\t */\n\tpublic static checkIsNumber(section: string, num: unknown): number {\n\t\tif (typeof num !== \"number\") {\n\t\t\tthrow new InsightError(\"JSON format error: \" + section + \" must be a number, not: \" + typeof num + \".\");\n\t\t}\n\t\treturn num as number;\n\t}\n\n\t/**\n\t * Checks whether the given str is a string, and throws an error identified with\n\t * section when it is not.\n\t *\n\t * @param section the name of the string\n\t * @param str the variable to test\n\t * @returns str as a string\n\t * @throws InsightError if str is not an string\n\t */\n\tpublic static checkIsString(section: string, str: unknown): string {\n\t\tif (typeof str !== \"string\") {\n\t\t\tthrow new InsightError(\"JSON format error: \" + section + \" must be a string, not: \" + typeof str + \".\");\n\t\t}\n\t\treturn str as string;\n\t}\n\n\t/**\n\t * Checks whether the given arr is an array, and throws an error identified with\n\t * section when it is not.\n\t *\n\t * @param section the name of the array\n\t * @param arr the variable to test\n\t * @returns arr as an array\n\t * @throws InsightError if arr is not an array\n\t */\n\tpublic static checkIsArray(section: string, arr: unknown): unknown[] {\n\t\tif (!Array.isArray(arr)) {\n\t\t\tthrow new InsightError(\"JSON format error: \" + section + \" must be an array, not: \" + typeof arr + \".\");\n\t\t}\n\t\treturn arr as unknown[];\n\t}\n\n\t/**\n\t * Checks whether given obj is an object, and throws an error identified with\n\t * section when it is not.\n\t *\n\t * @param section the name of the object\n\t * @param obj the variable to test\n\t * @returns obj as an object\n\t * @throws InsightError if obj is not an object.\n\t */\n\tpublic static checkIsObject(section: string, obj: unknown): object {\n\t\tif (typeof obj !== \"object\" || Array.isArray(obj) || obj === null || obj === undefined) {\n\t\t\tthrow new InsightError(\"JSON format error: \" + section + \" must be an object, not: \" + typeof obj + \", \" + obj);\n\t\t}\n\t\treturn obj as object;\n\t}\n\n\t/**\n\t *\n\t * @param content base64 content to unzip\n\t * @returns a JSZip of the content\n\t * @throws InsightError if the content cannot be properly parsed\n\t */\n\tpublic static async unzipBase64Content(content: string): Promise<JSZip> {\n\t\tlet unzipped: JSZip;\n\t\ttry {\n\t\t\tunzipped = await new JSZip().loadAsync(content, { base64: true });\n\t\t} catch (e) {\n\t\t\tthrow new InsightError(\"Error parsing content \" + e);\n\t\t}\n\t\treturn unzipped;\n\t}\n\n\t/**\n\t *\n\t * @param datasets datasets to get ids from\n\t * @returns all ids in the given datasets\n\t */\n\tpublic static getAllIDs(datasets: DatasetList): string[] {\n\t\treturn this.combineDatasets(datasets).map((x) => x.id);\n\t}\n\n\t/**\n\t *\n\t * @param datasets datasets to combine\n\t * @returns list of datasets combined\n\t */\n\tpublic static combineDatasets(datasets: DatasetList): Dataset<Section | Room>[] {\n\t\treturn (datasets.rooms as Dataset<Section | Room>[]).concat(datasets.sections);\n\t}\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c711a5eaf125d4a34e3032f6cdf78ffd66a1e9e3","contentHash":"428c4eb16051d70880e168817a3be5f715cb299f3c395d7e1d9f032a97c1c317"},"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/IInsightFacade.ts":{"path":"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/IInsightFacade.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":113}},"2":{"start":{"line":5,"column":0},"end":{"line":8,"column":89}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":48}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":42}},"5":{"start":{"line":11,"column":8},"end":{"line":11,"column":23}},"6":{"start":{"line":12,"column":8},"end":{"line":12,"column":52}},"7":{"start":{"line":15,"column":0},"end":{"line":15,"column":36}},"8":{"start":{"line":18,"column":8},"end":{"line":18,"column":23}},"9":{"start":{"line":19,"column":8},"end":{"line":19,"column":53}},"10":{"start":{"line":22,"column":0},"end":{"line":22,"column":38}},"11":{"start":{"line":25,"column":8},"end":{"line":25,"column":23}},"12":{"start":{"line":26,"column":8},"end":{"line":26,"column":59}},"13":{"start":{"line":29,"column":0},"end":{"line":29,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":31},"end":{"line":8,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":25},"end":{"line":13,"column":5}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":25},"end":{"line":20,"column":5}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":25},"end":{"line":27,"column":5}},"line":24}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":24},"end":{"line":8,"column":87}},"type":"binary-expr","locations":[{"start":{"line":8,"column":24},"end":{"line":8,"column":50}},{"start":{"line":8,"column":55},"end":{"line":8,"column":86}}],"line":8}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":110344,"6":110344,"7":1,"8":1,"9":1,"10":1,"11":3,"12":3,"13":1},"f":{"0":1,"1":110344,"2":1,"3":3},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/IInsightFacade.ts","sources":["/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/IInsightFacade.ts"],"names":[],"mappings":";;;AAMA,IAAY,kBAGX;AAHD,WAAY,kBAAkB;IAC7B,2CAAqB,CAAA;IACrB,qCAAe,CAAA;AAChB,CAAC,EAHW,kBAAkB,GAAlB,0BAAkB,KAAlB,0BAAkB,QAG7B;AAUD,MAAa,YAAa,SAAQ,KAAK;IACtC,YAAY,OAAgB;QAC3B,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,KAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;IAC7C,CAAC;CACD;AALD,oCAKC;AAED,MAAa,aAAc,SAAQ,KAAK;IACvC,YAAY,OAAgB;QAC3B,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,KAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;IAC9C,CAAC;CACD;AALD,sCAKC;AAED,MAAa,mBAAoB,SAAQ,KAAK;IAC7C,YAAY,OAAgB;QAC3B,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,KAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,mBAAmB,CAAC,CAAC;IACpD,CAAC;CACD;AALD,kDAKC","sourcesContent":["/*\n * This is the primary high-level API for the project. In this folder there should be:\n * A class called InsightFacade, this should be in a file called InsightFacade.ts.\n * You should not change this interface at all or the test suite will not work.\n */\n\nexport enum InsightDatasetKind {\n\tSections = \"sections\",\n\tRooms = \"rooms\",\n}\n\nexport interface InsightDataset {\n\tid: string;\n\tkind: InsightDatasetKind;\n\tnumRows: number;\n}\n\nexport type InsightResult = Record<string, string | number>;\n\nexport class InsightError extends Error {\n\tconstructor(message?: string) {\n\t\tsuper(message);\n\t\tError.captureStackTrace(this, InsightError);\n\t}\n}\n\nexport class NotFoundError extends Error {\n\tconstructor(message?: string) {\n\t\tsuper(message);\n\t\tError.captureStackTrace(this, NotFoundError);\n\t}\n}\n\nexport class ResultTooLargeError extends Error {\n\tconstructor(message?: string) {\n\t\tsuper(message);\n\t\tError.captureStackTrace(this, ResultTooLargeError);\n\t}\n}\n\nexport interface IInsightFacade {\n\t/**\n\t * Add a dataset to insightUBC.\n\t *\n\t * @param id  The id of the dataset being added. Follows the format /^[^_]+$/\n\t * @param content  The base64 content of the dataset. This content should be in the form of a serialized zip file.\n\t * @param kind  The kind of the dataset\n\t *\n\t * @return Promise <string[]>\n\t *\n\t * The promise should fulfill on a successful add, reject for any failures.\n\t * The promise should fulfill with a string array,\n\t * containing the ids of all currently added datasets upon a successful add.\n\t * The promise should reject with an InsightError describing the error.\n\t *\n\t * An id is invalid if it contains an underscore, or is only whitespace characters.\n\t * If id is the same as the id of an already added dataset, the dataset should be rejected and not saved.\n\t *\n\t * After receiving the dataset, it should be processed into a data structure of\n\t * your design. The processed data structure should be persisted to disk; your\n\t * system should be able to load this persisted value into memory for answering\n\t * queries.\n\t *\n\t * Ultimately, a dataset must be added or loaded from disk before queries can\n\t * be successfully answered.\n\t */\n\taddDataset(id: string, content: string, kind: InsightDatasetKind): Promise<string[]>;\n\n\t/**\n\t * Remove a dataset from insightUBC.\n\t *\n\t * @param id  The id of the dataset to remove. Follows the format /^[^_]+$/\n\t *\n\t * @return Promise <string>\n\t *\n\t * The promise should fulfill upon a successful removal, reject on any error.\n\t * Attempting to remove a dataset that hasn't been added yet counts as an error.\n\t *\n\t * An id is invalid if it contains an underscore, or is only whitespace characters.\n\t *\n\t * The promise should fulfill the id of the dataset that was removed.\n\t * The promise should reject with a NotFoundError (if a valid id was not yet added)\n\t * or an InsightError (invalid id or any other source of failure) describing the error.\n\t *\n\t * This will delete both disk and memory caches for the dataset for the id meaning\n\t * that subsequent queries for that id should fail unless a new addDataset happens first.\n\t */\n\tremoveDataset(id: string): Promise<string>;\n\n\t/**\n\t * Perform a query on insightUBC.\n\t *\n\t * @param query  The query to be performed.\n\t *\n\t * If a query is incorrectly formatted, references a dataset not added (in memory or on disk),\n\t * or references multiple datasets, it should be rejected.\n\t *\n\t * @return Promise <InsightResult[]>\n\t *\n\t * The promise should fulfill with an array of results.\n\t * The promise should reject with a ResultTooLargeError (if the query returns too many results)\n\t * or an InsightError (for any other source of failure) describing the error.\n\t */\n\tperformQuery(query: unknown): Promise<InsightResult[]>;\n\n\t/**\n\t * List all currently added datasets, their types, and number of rows.\n\t *\n\t * @return Promise <InsightDataset[]>\n\t * The promise should fulfill an array of currently added InsightDatasets, and will only fulfill.\n\t */\n\tlistDatasets(): Promise<InsightDataset[]>;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d0dced8471f30e6fc175ecfbe2af877f35daa9a0","contentHash":"3405cee3e86702967f227690b413136132f5522cb24903468b8a7cc5f7178d71"},"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/InsightFacade.ts":{"path":"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/InsightFacade.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":38}},"4":{"start":{"line":7,"column":25},"end":{"line":7,"column":52}},"5":{"start":{"line":8,"column":22},"end":{"line":8,"column":46}},"6":{"start":{"line":9,"column":25},"end":{"line":9,"column":69}},"7":{"start":{"line":10,"column":35},"end":{"line":10,"column":89}},"8":{"start":{"line":11,"column":32},"end":{"line":11,"column":66}},"9":{"start":{"line":15,"column":8},"end":{"line":15,"column":51}},"10":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"11":{"start":{"line":19,"column":12},"end":{"line":19,"column":87}},"12":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"13":{"start":{"line":21,"column":71},"end":{"line":21,"column":88}},"14":{"start":{"line":22,"column":12},"end":{"line":22,"column":75}},"15":{"start":{"line":24,"column":8},"end":{"line":33,"column":9}},"16":{"start":{"line":25,"column":34},"end":{"line":25,"column":100}},"17":{"start":{"line":26,"column":28},"end":{"line":26,"column":114}},"18":{"start":{"line":27,"column":12},"end":{"line":27,"column":56}},"19":{"start":{"line":30,"column":31},"end":{"line":30,"column":105}},"20":{"start":{"line":31,"column":28},"end":{"line":31,"column":108}},"21":{"start":{"line":32,"column":12},"end":{"line":32,"column":53}},"22":{"start":{"line":34,"column":8},"end":{"line":34,"column":36}},"23":{"start":{"line":35,"column":8},"end":{"line":35,"column":79}},"24":{"start":{"line":38,"column":8},"end":{"line":40,"column":9}},"25":{"start":{"line":39,"column":12},"end":{"line":39,"column":73}},"26":{"start":{"line":41,"column":28},"end":{"line":41,"column":30}},"27":{"start":{"line":42,"column":25},"end":{"line":42,"column":27}},"28":{"start":{"line":43,"column":25},"end":{"line":43,"column":54}},"29":{"start":{"line":44,"column":8},"end":{"line":48,"column":11}},"30":{"start":{"line":45,"column":12},"end":{"line":47,"column":13}},"31":{"start":{"line":46,"column":16},"end":{"line":46,"column":42}},"32":{"start":{"line":49,"column":8},"end":{"line":53,"column":11}},"33":{"start":{"line":50,"column":12},"end":{"line":52,"column":13}},"34":{"start":{"line":51,"column":16},"end":{"line":51,"column":39}},"35":{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},"36":{"start":{"line":55,"column":12},"end":{"line":55,"column":94}},"37":{"start":{"line":57,"column":8},"end":{"line":57,"column":80}},"38":{"start":{"line":58,"column":8},"end":{"line":58,"column":36}},"39":{"start":{"line":59,"column":8},"end":{"line":59,"column":18}},"40":{"start":{"line":62,"column":25},"end":{"line":62,"column":54}},"41":{"start":{"line":63,"column":19},"end":{"line":63,"column":64}},"42":{"start":{"line":63,"column":55},"end":{"line":63,"column":63}},"43":{"start":{"line":64,"column":25},"end":{"line":64,"column":53}},"44":{"start":{"line":65,"column":8},"end":{"line":65,"column":24}},"45":{"start":{"line":68,"column":8},"end":{"line":72,"column":12}},"46":{"start":{"line":68,"column":103},"end":{"line":72,"column":9}},"47":{"start":{"line":75,"column":0},"end":{"line":75,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":18},"end":{"line":16,"column":5}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":40},"end":{"line":36,"column":5}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":21,"column":58},"end":{"line":21,"column":59}},"loc":{"start":{"line":21,"column":71},"end":{"line":21,"column":88}},"line":21},"4":{"name":"(anonymous_4)","decl":{"start":{"line":37,"column":4},"end":{"line":37,"column":5}},"loc":{"start":{"line":37,"column":28},"end":{"line":60,"column":5}},"line":37},"5":{"name":"(anonymous_5)","decl":{"start":{"line":44,"column":34},"end":{"line":44,"column":35}},"loc":{"start":{"line":44,"column":47},"end":{"line":48,"column":9}},"line":44},"6":{"name":"(anonymous_6)","decl":{"start":{"line":49,"column":31},"end":{"line":49,"column":32}},"loc":{"start":{"line":49,"column":44},"end":{"line":53,"column":9}},"line":49},"7":{"name":"(anonymous_7)","decl":{"start":{"line":61,"column":4},"end":{"line":61,"column":5}},"loc":{"start":{"line":61,"column":30},"end":{"line":66,"column":5}},"line":61},"8":{"name":"(anonymous_8)","decl":{"start":{"line":63,"column":49},"end":{"line":63,"column":50}},"loc":{"start":{"line":63,"column":55},"end":{"line":63,"column":63}},"line":63},"9":{"name":"(anonymous_9)","decl":{"start":{"line":67,"column":4},"end":{"line":67,"column":5}},"loc":{"start":{"line":67,"column":25},"end":{"line":73,"column":5}},"line":67},"10":{"name":"(anonymous_10)","decl":{"start":{"line":68,"column":89},"end":{"line":68,"column":90}},"loc":{"start":{"line":68,"column":103},"end":{"line":72,"column":9}},"line":68}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},{"start":{"line":18,"column":8},"end":{"line":20,"column":9}}],"line":18},"4":{"loc":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},{"start":{"line":21,"column":8},"end":{"line":23,"column":9}}],"line":21},"5":{"loc":{"start":{"line":24,"column":8},"end":{"line":33,"column":9}},"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":33,"column":9}},{"start":{"line":24,"column":8},"end":{"line":33,"column":9}}],"line":24},"6":{"loc":{"start":{"line":38,"column":8},"end":{"line":40,"column":9}},"type":"if","locations":[{"start":{"line":38,"column":8},"end":{"line":40,"column":9}},{"start":{"line":38,"column":8},"end":{"line":40,"column":9}}],"line":38},"7":{"loc":{"start":{"line":45,"column":12},"end":{"line":47,"column":13}},"type":"if","locations":[{"start":{"line":45,"column":12},"end":{"line":47,"column":13}},{"start":{"line":45,"column":12},"end":{"line":47,"column":13}}],"line":45},"8":{"loc":{"start":{"line":50,"column":12},"end":{"line":52,"column":13}},"type":"if","locations":[{"start":{"line":50,"column":12},"end":{"line":52,"column":13}},{"start":{"line":50,"column":12},"end":{"line":52,"column":13}}],"line":50},"9":{"loc":{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},"type":"if","locations":[{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},{"start":{"line":54,"column":8},"end":{"line":56,"column":9}}],"line":54}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":32,"10":44,"11":4,"12":40,"13":11,"14":2,"15":38,"16":36,"17":27,"18":27,"19":2,"20":2,"21":2,"22":29,"23":29,"24":5,"25":2,"26":3,"27":3,"28":3,"29":3,"30":4,"31":2,"32":3,"33":0,"34":0,"35":3,"36":1,"37":2,"38":2,"39":2,"40":75,"41":75,"42":57,"43":75,"44":24,"45":15,"46":14,"47":1},"f":{"0":2,"1":32,"2":44,"3":11,"4":5,"5":4,"6":0,"7":75,"8":57,"9":15,"10":14},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2],"3":[4,40],"4":[2,38],"5":[36,2],"6":[2,3],"7":[2,2],"8":[0,0],"9":[1,2]},"inputSourceMap":{"version":3,"file":"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/InsightFacade.ts","sources":["/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/InsightFacade.ts"],"names":[],"mappings":"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","sourcesContent":["import { SectionsDataset, DatasetUtils, RoomsDataset } from \"./Dataset\";\nimport {\n\tIInsightFacade,\n\tInsightDataset,\n\tInsightDatasetKind,\n\tInsightError,\n\tInsightResult,\n\tNotFoundError,\n} from \"./IInsightFacade\";\nimport { QueryEngine } from \"./QueryEngine\";\nimport PersistantData from \"./PersistantData\";\nimport SectionsDatasetProcessor from \"./SectionsDatasetProcessor\";\nimport { RoomsDatasetProcessor } from \"./RoomsDatasetProcessor\";\n\n/**\n * This is the main programmatic entry point for the project.\n * Method documentation is in IInsightFacade\n *\n */\nexport default class InsightFacade implements IInsightFacade {\n\tprivate data: PersistantData;\n\n\tconstructor() {\n\t\tthis.data = new PersistantData();\n\t}\n\n\tpublic async addDataset(id: string, content: string, kind: InsightDatasetKind): Promise<string[]> {\n\t\t// Check id valid\n\t\tif (!DatasetUtils.isValidIdString(id)) {\n\t\t\tthrow new InsightError(\"Invalid dataset ID: \" + id + \".\");\n\t\t}\n\n\t\t// Check for duplicate ID\n\t\tif ((await this.data.getDatasets()).sections.find((dataset) => dataset.id === id)) {\n\t\t\tthrow new InsightError(\"Duplicate ID: \" + id);\n\t\t}\n\n\t\t// Check kind\n\t\tif (kind === InsightDatasetKind.Sections) {\n\t\t\tconst validSections = await SectionsDatasetProcessor.getValidSections(content);\n\t\t\tconst dataset: SectionsDataset = { id: id, members: validSections, type: InsightDatasetKind.Sections };\n\t\t\tawait this.data.addSectionsDataset(dataset);\n\t\t} else {\n\t\t\tconst validRooms = await RoomsDatasetProcessor.getValidRooms(content);\n\t\t\tconst dataset: RoomsDataset = { id: id, members: validRooms, type: InsightDatasetKind.Rooms };\n\t\t\tawait this.data.addRoomsDataset(dataset);\n\t\t}\n\n\t\t// Save to disc\n\t\tawait this.data.writeData();\n\n\t\t// Return list of valid datasets\n\t\treturn DatasetUtils.getAllIDs(await this.data.getDatasets());\n\t}\n\n\tpublic async removeDataset(id: string): Promise<string> {\n\t\tif (!DatasetUtils.isValidIdString(id)) {\n\t\t\tthrow new InsightError(\"Invalid id: \" + id);\n\t\t}\n\t\tconst newSections: SectionsDataset[] = [];\n\t\tconst newRooms: RoomsDataset[] = [];\n\t\tconst datasets = await this.data.getDatasets();\n\t\tdatasets.sections.forEach((dataset) => {\n\t\t\tif (dataset.id !== id) {\n\t\t\t\tnewSections.push(dataset);\n\t\t\t}\n\t\t});\n\t\tdatasets.rooms.forEach((dataset) => {\n\t\t\tif (dataset.id !== id) {\n\t\t\t\tnewRooms.push(dataset);\n\t\t\t}\n\t\t});\n\t\tif ((await this.data.getDatasets()).sections.length === newSections.length) {\n\t\t\tthrow new NotFoundError(\"Dataset with id \" + id + \" not found.\");\n\t\t}\n\t\tawait this.data.setDatasets({ sections: newSections, rooms: newRooms });\n\n\t\t// Save to disc\n\t\tawait this.data.writeData();\n\n\t\treturn id;\n\t}\n\n\tpublic async performQuery(query: unknown): Promise<InsightResult[]> {\n\t\tconst datasets = await this.data.getDatasets();\n\t\tconst qe = new QueryEngine(() => datasets);\n\t\tconst sections = await qe.processQuery(query);\n\t\treturn sections;\n\t}\n\n\tpublic async listDatasets(): Promise<InsightDataset[]> {\n\t\treturn DatasetUtils.combineDatasets(await this.data.getDatasets()).map((dataset) => ({\n\t\t\tid: dataset.id,\n\t\t\tkind: dataset.type,\n\t\t\tnumRows: dataset.members.length,\n\t\t}));\n\t}\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8cc88d3b6d08d8a99e3c1cf694c86c7cf4f31c41","contentHash":"13087eb41024ace75e3d5524e08a34aaf22ff9b6c757d4989bb075ea606d1abf"},"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/QueryEngine.ts":{"path":"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/QueryEngine.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":18},"end":{"line":4,"column":38}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":36}},"4":{"start":{"line":6,"column":25},"end":{"line":6,"column":52}},"5":{"start":{"line":11,"column":8},"end":{"line":11,"column":33}},"6":{"start":{"line":14,"column":22},"end":{"line":14,"column":77}},"7":{"start":{"line":15,"column":30},"end":{"line":18,"column":10}},"8":{"start":{"line":19,"column":8},"end":{"line":19,"column":90}},"9":{"start":{"line":20,"column":25},"end":{"line":20,"column":85}},"10":{"start":{"line":21,"column":32},"end":{"line":21,"column":59}},"11":{"start":{"line":22,"column":8},"end":{"line":22,"column":74}},"12":{"start":{"line":22,"column":42},"end":{"line":22,"column":72}},"13":{"start":{"line":25,"column":23},"end":{"line":25,"column":25}},"14":{"start":{"line":26,"column":8},"end":{"line":29,"column":11}},"15":{"start":{"line":27,"column":33},"end":{"line":27,"column":54}},"16":{"start":{"line":28,"column":12},"end":{"line":28,"column":79}},"17":{"start":{"line":30,"column":8},"end":{"line":30,"column":22}},"18":{"start":{"line":33,"column":8},"end":{"line":49,"column":9}},"19":{"start":{"line":34,"column":26},"end":{"line":34,"column":44}},"20":{"start":{"line":36,"column":12},"end":{"line":44,"column":13}},"21":{"start":{"line":37,"column":16},"end":{"line":37,"column":71}},"22":{"start":{"line":37,"column":39},"end":{"line":37,"column":70}},"23":{"start":{"line":39,"column":17},"end":{"line":44,"column":13}},"24":{"start":{"line":40,"column":16},"end":{"line":40,"column":84}},"25":{"start":{"line":40,"column":39},"end":{"line":40,"column":83}},"26":{"start":{"line":43,"column":16},"end":{"line":43,"column":92}},"27":{"start":{"line":45,"column":12},"end":{"line":45,"column":55}},"28":{"start":{"line":48,"column":12},"end":{"line":48,"column":28}},"29":{"start":{"line":52,"column":24},"end":{"line":52,"column":100}},"30":{"start":{"line":53,"column":33},"end":{"line":56,"column":10}},"31":{"start":{"line":57,"column":53},"end":{"line":57,"column":88}},"32":{"start":{"line":58,"column":30},"end":{"line":58,"column":84}},"33":{"start":{"line":59,"column":8},"end":{"line":62,"column":9}},"34":{"start":{"line":60,"column":42},"end":{"line":60,"column":76}},"35":{"start":{"line":61,"column":12},"end":{"line":61,"column":92}},"36":{"start":{"line":63,"column":8},"end":{"line":67,"column":10}},"37":{"start":{"line":70,"column":30},"end":{"line":70,"column":32}},"38":{"start":{"line":72,"column":24},"end":{"line":72,"column":137}},"39":{"start":{"line":73,"column":8},"end":{"line":86,"column":11}},"40":{"start":{"line":74,"column":27},"end":{"line":74,"column":102}},"41":{"start":{"line":75,"column":30},"end":{"line":75,"column":73}},"42":{"start":{"line":76,"column":12},"end":{"line":78,"column":13}},"43":{"start":{"line":77,"column":16},"end":{"line":77,"column":107}},"44":{"start":{"line":79,"column":12},"end":{"line":84,"column":13}},"45":{"start":{"line":80,"column":16},"end":{"line":80,"column":110}},"46":{"start":{"line":83,"column":16},"end":{"line":83,"column":55}},"47":{"start":{"line":85,"column":12},"end":{"line":85,"column":64}},"48":{"start":{"line":87,"column":8},"end":{"line":89,"column":9}},"49":{"start":{"line":88,"column":12},"end":{"line":88,"column":94}},"50":{"start":{"line":90,"column":8},"end":{"line":90,"column":52}},"51":{"start":{"line":94,"column":8},"end":{"line":106,"column":9}},"52":{"start":{"line":95,"column":26},"end":{"line":95,"column":136}},"53":{"start":{"line":96,"column":29},"end":{"line":96,"column":71}},"54":{"start":{"line":97,"column":12},"end":{"line":105,"column":13}},"55":{"start":{"line":98,"column":16},"end":{"line":98,"column":41}},"56":{"start":{"line":99,"column":16},"end":{"line":101,"column":17}},"57":{"start":{"line":100,"column":20},"end":{"line":100,"column":114}},"58":{"start":{"line":104,"column":16},"end":{"line":104,"column":106}},"59":{"start":{"line":107,"column":8},"end":{"line":107,"column":29}},"60":{"start":{"line":110,"column":24},"end":{"line":110,"column":97}},"61":{"start":{"line":111,"column":8},"end":{"line":113,"column":9}},"62":{"start":{"line":112,"column":12},"end":{"line":112,"column":119}},"63":{"start":{"line":114,"column":23},"end":{"line":114,"column":60}},"64":{"start":{"line":115,"column":31},"end":{"line":115,"column":70}},"65":{"start":{"line":116,"column":25},"end":{"line":116,"column":47}},"66":{"start":{"line":117,"column":8},"end":{"line":119,"column":9}},"67":{"start":{"line":118,"column":12},"end":{"line":118,"column":61}},"68":{"start":{"line":120,"column":8},"end":{"line":120,"column":24}},"69":{"start":{"line":123,"column":21},"end":{"line":123,"column":91}},"70":{"start":{"line":124,"column":27},"end":{"line":132,"column":10}},"71":{"start":{"line":133,"column":8},"end":{"line":135,"column":9}},"72":{"start":{"line":134,"column":12},"end":{"line":134,"column":128}},"73":{"start":{"line":136,"column":23},"end":{"line":136,"column":35}},"74":{"start":{"line":137,"column":8},"end":{"line":137,"column":96}},"75":{"start":{"line":137,"column":44},"end":{"line":137,"column":93}},"76":{"start":{"line":138,"column":8},"end":{"line":138,"column":24}},"77":{"start":{"line":141,"column":8},"end":{"line":171,"column":9}},"78":{"start":{"line":144,"column":30},"end":{"line":144,"column":77}},"79":{"start":{"line":145,"column":33},"end":{"line":145,"column":90}},"80":{"start":{"line":145,"column":53},"end":{"line":145,"column":89}},"81":{"start":{"line":146,"column":16},"end":{"line":148,"column":17}},"82":{"start":{"line":147,"column":20},"end":{"line":147,"column":89}},"83":{"start":{"line":149,"column":16},"end":{"line":149,"column":112}},"84":{"start":{"line":154,"column":47},"end":{"line":154,"column":78}},"85":{"start":{"line":155,"column":31},"end":{"line":155,"column":83}},"86":{"start":{"line":156,"column":16},"end":{"line":160,"column":64}},"87":{"start":{"line":163,"column":16},"end":{"line":163,"column":73}},"88":{"start":{"line":165,"column":47},"end":{"line":165,"column":116}},"89":{"start":{"line":166,"column":31},"end":{"line":166,"column":120}},"90":{"start":{"line":167,"column":16},"end":{"line":167,"column":52}},"91":{"start":{"line":170,"column":16},"end":{"line":170,"column":93}},"92":{"start":{"line":174,"column":24},"end":{"line":174,"column":75}},"93":{"start":{"line":175,"column":28},"end":{"line":175,"column":63}},"94":{"start":{"line":176,"column":8},"end":{"line":178,"column":9}},"95":{"start":{"line":177,"column":12},"end":{"line":177,"column":92}},"96":{"start":{"line":179,"column":20},"end":{"line":179,"column":74}},"97":{"start":{"line":180,"column":25},"end":{"line":180,"column":42}},"98":{"start":{"line":181,"column":8},"end":{"line":183,"column":9}},"99":{"start":{"line":182,"column":12},"end":{"line":182,"column":103}},"100":{"start":{"line":184,"column":8},"end":{"line":186,"column":9}},"101":{"start":{"line":185,"column":12},"end":{"line":185,"column":96}},"102":{"start":{"line":187,"column":8},"end":{"line":201,"column":9}},"103":{"start":{"line":188,"column":12},"end":{"line":190,"column":13}},"104":{"start":{"line":189,"column":16},"end":{"line":189,"column":87}},"105":{"start":{"line":191,"column":12},"end":{"line":191,"column":35}},"106":{"start":{"line":193,"column":13},"end":{"line":201,"column":9}},"107":{"start":{"line":194,"column":12},"end":{"line":196,"column":13}},"108":{"start":{"line":195,"column":16},"end":{"line":195,"column":87}},"109":{"start":{"line":197,"column":12},"end":{"line":197,"column":35}},"110":{"start":{"line":200,"column":12},"end":{"line":200,"column":111}},"111":{"start":{"line":204,"column":0},"end":{"line":204,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":26},"end":{"line":12,"column":5}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":33},"end":{"line":23,"column":5}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":22,"column":35},"end":{"line":22,"column":36}},"loc":{"start":{"line":22,"column":42},"end":{"line":22,"column":72}},"line":22},"3":{"name":"(anonymous_3)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":36},"end":{"line":31,"column":5}},"line":24},"4":{"name":"(anonymous_4)","decl":{"start":{"line":26,"column":37},"end":{"line":26,"column":38}},"loc":{"start":{"line":26,"column":49},"end":{"line":29,"column":9}},"line":26},"5":{"name":"(anonymous_5)","decl":{"start":{"line":32,"column":4},"end":{"line":32,"column":5}},"loc":{"start":{"line":32,"column":27},"end":{"line":50,"column":5}},"line":32},"6":{"name":"(anonymous_6)","decl":{"start":{"line":37,"column":29},"end":{"line":37,"column":30}},"loc":{"start":{"line":37,"column":39},"end":{"line":37,"column":70}},"line":37},"7":{"name":"(anonymous_7)","decl":{"start":{"line":40,"column":29},"end":{"line":40,"column":30}},"loc":{"start":{"line":40,"column":39},"end":{"line":40,"column":83}},"line":40},"8":{"name":"(anonymous_8)","decl":{"start":{"line":51,"column":4},"end":{"line":51,"column":5}},"loc":{"start":{"line":51,"column":31},"end":{"line":68,"column":5}},"line":51},"9":{"name":"(anonymous_9)","decl":{"start":{"line":60,"column":33},"end":{"line":60,"column":34}},"loc":{"start":{"line":60,"column":42},"end":{"line":60,"column":76}},"line":60},"10":{"name":"(anonymous_10)","decl":{"start":{"line":69,"column":4},"end":{"line":69,"column":5}},"loc":{"start":{"line":69,"column":35},"end":{"line":91,"column":5}},"line":69},"11":{"name":"(anonymous_11)","decl":{"start":{"line":73,"column":24},"end":{"line":73,"column":25}},"loc":{"start":{"line":73,"column":39},"end":{"line":86,"column":9}},"line":73},"12":{"name":"(anonymous_12)","decl":{"start":{"line":92,"column":4},"end":{"line":92,"column":5}},"loc":{"start":{"line":92,"column":54},"end":{"line":108,"column":5}},"line":92},"13":{"name":"(anonymous_13)","decl":{"start":{"line":109,"column":4},"end":{"line":109,"column":5}},"loc":{"start":{"line":109,"column":25},"end":{"line":121,"column":5}},"line":109},"14":{"name":"(anonymous_14)","decl":{"start":{"line":122,"column":4},"end":{"line":122,"column":5}},"loc":{"start":{"line":122,"column":39},"end":{"line":139,"column":5}},"line":122},"15":{"name":"(anonymous_15)","decl":{"start":{"line":137,"column":27},"end":{"line":137,"column":28}},"loc":{"start":{"line":137,"column":44},"end":{"line":137,"column":93}},"line":137},"16":{"name":"(anonymous_16)","decl":{"start":{"line":140,"column":4},"end":{"line":140,"column":5}},"loc":{"start":{"line":140,"column":38},"end":{"line":172,"column":5}},"line":140},"17":{"name":"(anonymous_17)","decl":{"start":{"line":145,"column":43},"end":{"line":145,"column":44}},"loc":{"start":{"line":145,"column":53},"end":{"line":145,"column":89}},"line":145},"18":{"name":"(anonymous_18)","decl":{"start":{"line":173,"column":4},"end":{"line":173,"column":5}},"loc":{"start":{"line":173,"column":40},"end":{"line":202,"column":5}},"line":173}},"branchMap":{"0":{"loc":{"start":{"line":33,"column":8},"end":{"line":49,"column":9}},"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":49,"column":9}},{"start":{"line":33,"column":8},"end":{"line":49,"column":9}}],"line":33},"1":{"loc":{"start":{"line":36,"column":12},"end":{"line":44,"column":13}},"type":"if","locations":[{"start":{"line":36,"column":12},"end":{"line":44,"column":13}},{"start":{"line":36,"column":12},"end":{"line":44,"column":13}}],"line":36},"2":{"loc":{"start":{"line":39,"column":17},"end":{"line":44,"column":13}},"type":"if","locations":[{"start":{"line":39,"column":17},"end":{"line":44,"column":13}},{"start":{"line":39,"column":17},"end":{"line":44,"column":13}}],"line":39},"3":{"loc":{"start":{"line":59,"column":8},"end":{"line":62,"column":9}},"type":"if","locations":[{"start":{"line":59,"column":8},"end":{"line":62,"column":9}},{"start":{"line":59,"column":8},"end":{"line":62,"column":9}}],"line":59},"4":{"loc":{"start":{"line":59,"column":12},"end":{"line":60,"column":91}},"type":"binary-expr","locations":[{"start":{"line":59,"column":12},"end":{"line":59,"column":39}},{"start":{"line":60,"column":12},"end":{"line":60,"column":91}}],"line":59},"5":{"loc":{"start":{"line":76,"column":12},"end":{"line":78,"column":13}},"type":"if","locations":[{"start":{"line":76,"column":12},"end":{"line":78,"column":13}},{"start":{"line":76,"column":12},"end":{"line":78,"column":13}}],"line":76},"6":{"loc":{"start":{"line":79,"column":12},"end":{"line":84,"column":13}},"type":"if","locations":[{"start":{"line":79,"column":12},"end":{"line":84,"column":13}},{"start":{"line":79,"column":12},"end":{"line":84,"column":13}}],"line":79},"7":{"loc":{"start":{"line":79,"column":16},"end":{"line":79,"column":91}},"type":"binary-expr","locations":[{"start":{"line":79,"column":16},"end":{"line":79,"column":47}},{"start":{"line":79,"column":51},"end":{"line":79,"column":91}}],"line":79},"8":{"loc":{"start":{"line":87,"column":8},"end":{"line":89,"column":9}},"type":"if","locations":[{"start":{"line":87,"column":8},"end":{"line":89,"column":9}},{"start":{"line":87,"column":8},"end":{"line":89,"column":9}}],"line":87},"9":{"loc":{"start":{"line":94,"column":8},"end":{"line":106,"column":9}},"type":"if","locations":[{"start":{"line":94,"column":8},"end":{"line":106,"column":9}},{"start":{"line":94,"column":8},"end":{"line":106,"column":9}}],"line":94},"10":{"loc":{"start":{"line":94,"column":12},"end":{"line":94,"column":122}},"type":"binary-expr","locations":[{"start":{"line":94,"column":12},"end":{"line":94,"column":58}},{"start":{"line":94,"column":62},"end":{"line":94,"column":122}}],"line":94},"11":{"loc":{"start":{"line":97,"column":12},"end":{"line":105,"column":13}},"type":"if","locations":[{"start":{"line":97,"column":12},"end":{"line":105,"column":13}},{"start":{"line":97,"column":12},"end":{"line":105,"column":13}}],"line":97},"12":{"loc":{"start":{"line":99,"column":16},"end":{"line":101,"column":17}},"type":"if","locations":[{"start":{"line":99,"column":16},"end":{"line":101,"column":17}},{"start":{"line":99,"column":16},"end":{"line":101,"column":17}}],"line":99},"13":{"loc":{"start":{"line":111,"column":8},"end":{"line":113,"column":9}},"type":"if","locations":[{"start":{"line":111,"column":8},"end":{"line":113,"column":9}},{"start":{"line":111,"column":8},"end":{"line":113,"column":9}}],"line":111},"14":{"loc":{"start":{"line":117,"column":8},"end":{"line":119,"column":9}},"type":"if","locations":[{"start":{"line":117,"column":8},"end":{"line":119,"column":9}},{"start":{"line":117,"column":8},"end":{"line":119,"column":9}}],"line":117},"15":{"loc":{"start":{"line":133,"column":8},"end":{"line":135,"column":9}},"type":"if","locations":[{"start":{"line":133,"column":8},"end":{"line":135,"column":9}},{"start":{"line":133,"column":8},"end":{"line":135,"column":9}}],"line":133},"16":{"loc":{"start":{"line":141,"column":8},"end":{"line":171,"column":9}},"type":"switch","locations":[{"start":{"line":142,"column":12},"end":{"line":142,"column":53}},{"start":{"line":143,"column":12},"end":{"line":150,"column":13}},{"start":{"line":151,"column":12},"end":{"line":151,"column":61}},{"start":{"line":152,"column":12},"end":{"line":152,"column":67}},{"start":{"line":153,"column":12},"end":{"line":161,"column":13}},{"start":{"line":162,"column":12},"end":{"line":163,"column":73}},{"start":{"line":164,"column":12},"end":{"line":168,"column":13}},{"start":{"line":169,"column":12},"end":{"line":170,"column":93}}],"line":141},"17":{"loc":{"start":{"line":146,"column":16},"end":{"line":148,"column":17}},"type":"if","locations":[{"start":{"line":146,"column":16},"end":{"line":148,"column":17}},{"start":{"line":146,"column":16},"end":{"line":148,"column":17}}],"line":146},"18":{"loc":{"start":{"line":149,"column":23},"end":{"line":149,"column":111}},"type":"cond-expr","locations":[{"start":{"line":149,"column":69},"end":{"line":149,"column":89}},{"start":{"line":149,"column":92},"end":{"line":149,"column":111}}],"line":149},"19":{"loc":{"start":{"line":156,"column":23},"end":{"line":160,"column":63}},"type":"cond-expr","locations":[{"start":{"line":157,"column":22},"end":{"line":157,"column":54}},{"start":{"line":158,"column":22},"end":{"line":160,"column":63}}],"line":156},"20":{"loc":{"start":{"line":158,"column":22},"end":{"line":160,"column":63}},"type":"cond-expr","locations":[{"start":{"line":159,"column":26},"end":{"line":159,"column":60}},{"start":{"line":160,"column":26},"end":{"line":160,"column":63}}],"line":158},"21":{"loc":{"start":{"line":176,"column":8},"end":{"line":178,"column":9}},"type":"if","locations":[{"start":{"line":176,"column":8},"end":{"line":178,"column":9}},{"start":{"line":176,"column":8},"end":{"line":178,"column":9}}],"line":176},"22":{"loc":{"start":{"line":181,"column":8},"end":{"line":183,"column":9}},"type":"if","locations":[{"start":{"line":181,"column":8},"end":{"line":183,"column":9}},{"start":{"line":181,"column":8},"end":{"line":183,"column":9}}],"line":181},"23":{"loc":{"start":{"line":184,"column":8},"end":{"line":186,"column":9}},"type":"if","locations":[{"start":{"line":184,"column":8},"end":{"line":186,"column":9}},{"start":{"line":184,"column":8},"end":{"line":186,"column":9}}],"line":184},"24":{"loc":{"start":{"line":187,"column":8},"end":{"line":201,"column":9}},"type":"if","locations":[{"start":{"line":187,"column":8},"end":{"line":201,"column":9}},{"start":{"line":187,"column":8},"end":{"line":201,"column":9}}],"line":187},"25":{"loc":{"start":{"line":188,"column":12},"end":{"line":190,"column":13}},"type":"if","locations":[{"start":{"line":188,"column":12},"end":{"line":190,"column":13}},{"start":{"line":188,"column":12},"end":{"line":190,"column":13}}],"line":188},"26":{"loc":{"start":{"line":193,"column":13},"end":{"line":201,"column":9}},"type":"if","locations":[{"start":{"line":193,"column":13},"end":{"line":201,"column":9}},{"start":{"line":193,"column":13},"end":{"line":201,"column":9}}],"line":193},"27":{"loc":{"start":{"line":194,"column":12},"end":{"line":196,"column":13}},"type":"if","locations":[{"start":{"line":194,"column":12},"end":{"line":196,"column":13}},{"start":{"line":194,"column":12},"end":{"line":196,"column":13}}],"line":194}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":76,"6":79,"7":76,"8":67,"9":57,"10":24,"11":24,"12":5292,"13":5292,"14":5292,"15":27190,"16":27190,"17":5292,"18":24,"19":17,"20":17,"21":17,"22":18946,"23":0,"24":0,"25":0,"26":0,"27":17,"28":7,"29":67,"30":67,"31":65,"32":62,"33":60,"34":153,"35":3,"36":57,"37":65,"38":65,"39":64,"40":320,"41":320,"42":320,"43":1,"44":319,"45":0,"46":319,"47":319,"48":63,"49":1,"50":62,"51":62,"52":53,"53":52,"54":52,"55":51,"56":51,"57":0,"58":1,"59":60,"60":57,"61":57,"62":1,"63":56,"64":56,"65":29,"66":24,"67":0,"68":24,"69":245,"70":244,"71":243,"72":1,"73":242,"74":242,"75":241,"76":178,"77":241,"78":77,"79":76,"80":171,"81":39,"82":1,"83":38,"84":91,"85":79,"86":72,"87":18,"88":55,"89":53,"90":52,"91":0,"92":146,"93":146,"94":146,"95":4,"96":142,"97":142,"98":142,"99":4,"100":138,"101":1,"102":137,"103":80,"104":1,"105":79,"106":57,"107":57,"108":4,"109":53,"110":0,"111":1},"f":{"0":76,"1":79,"2":5292,"3":5292,"4":27190,"5":24,"6":18946,"7":0,"8":67,"9":153,"10":65,"11":320,"12":62,"13":57,"14":245,"15":241,"16":241,"17":171,"18":146},"b":{"0":[17,7],"1":[17,0],"2":[0,0],"3":[3,57],"4":[60,51],"5":[1,319],"6":[0,319],"7":[319,256],"8":[1,62],"9":[53,9],"10":[62,53],"11":[51,1],"12":[0,51],"13":[1,56],"14":[0,24],"15":[1,242],"16":[56,77,20,61,91,18,55,0],"17":[1,38],"18":[31,7],"19":[14,58],"20":[25,33],"21":[4,142],"22":[4,138],"23":[1,137],"24":[80,57],"25":[1,79],"26":[57,0],"27":[4,53]},"inputSourceMap":{"version":3,"file":"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/QueryEngine.ts","sources":["/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/QueryEngine.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n\tSection,\n\tDatasetsProvider,\n\tDatasetUtils,\n\tInsightFacadeKey,\n\tKeywords,\n\tOptionsState,\n\tmaxResults,\n} from \"./Dataset\";\nimport { FilterBySection, FilterOperation, FilterStrategy } from \"./Filter\";\nimport { InsightError, InsightResult, ResultTooLargeError } from \"./IInsightFacade\";\n// import Decimal from \"decimal.js\";\n\nexport class QueryEngine {\n\tprivate readonly datasets: DatasetsProvider;\n\tprivate options?: OptionsState;\n\n\tconstructor(datasets: DatasetsProvider) {\n\t\tthis.datasets = datasets;\n\t}\n\n\t/**\n\t *\n\t * @param query The query object in accordance with IInsightFacade.performQuery\n\t * @throws InsightError if query is improprly formed\n\t */\n\tpublic async processQuery(queryRaw: unknown): Promise<InsightResult[]> {\n\t\t// Ensure query is obect and update type\n\t\tconst query = DatasetUtils.checkIsObject(\"Query\", queryRaw);\n\n\t\t// Ensure only keys are body and options\n\t\tconst rootStructure = DatasetUtils.requireExactKeys(query, [\n\t\t\t[Keywords.Options, true],\n\t\t\t[Keywords.Body, true],\n\t\t]);\n\n\t\t// Split into processing body and options\n\t\tthis.options = this.processOptions(rootStructure.get(Keywords.Options));\n\t\tconst sections = this.processBody(rootStructure.get(Keywords.Body));\n\n\t\t// Sort results if required\n\t\tconst sectionsOrdered = this.orderResults(sections);\n\n\t\t// Return only data requested\n\t\treturn sectionsOrdered.map((s) => this.sectionToInsightResult(s));\n\t}\n\n\t/**\n\t *\n\t * @param section the section to convert\n\t * @returns an InsightResult with only the columns selected and dataset id appended to entries\n\t */\n\tprivate sectionToInsightResult(section: Section): InsightResult {\n\t\tconst result: InsightResult = {};\n\t\tthis.options!!.columns.forEach((column) => {\n\t\t\tconst sectionValue = section[column.field];\n\t\t\tresult[this.options!!.datasetId + \"_\" + column.field] = sectionValue;\n\t\t});\n\t\treturn result;\n\t}\n\n\t/**\n\t *\n\t * @param sections the sections to order\n\t * @returns an ordered list of sections based on this.options ordering\n\t */\n\tprivate orderResults(sections: Section[]): Section[] {\n\t\t// Sort result data\n\t\tif (this.options!!.order !== undefined) {\n\t\t\tconst order = this.options!!.order!!;\n\t\t\tlet comparator: (a: Section, b: Section) => number;\n\t\t\tif (DatasetUtils.isMKey(order.field)) {\n\t\t\t\tcomparator = (a, b): number => (a[order.field] as number) - (b[order.field] as number);\n\t\t\t} else if (DatasetUtils.isSKey(order.field)) {\n\t\t\t\tcomparator = (a, b): number => (a[order.field] as string).localeCompare(b[order.field] as string);\n\t\t\t} else {\n\t\t\t\tthrow new InsightError(\"Invalid key type! \" + order.field);\n\t\t\t}\n\t\t\treturn sections.reverse().sort(comparator);\n\t\t} else {\n\t\t\treturn sections;\n\t\t}\n\t}\n\n\t/**\n\t * @param query query object to take body from.\n\t * @throws InsightError if options are malformed.\n\t */\n\tprivate processOptions(optionsRaw: unknown): OptionsState {\n\t\t// Retrieve options and ensure it is JSON\n\t\tconst options = DatasetUtils.checkIsObject(Keywords.Options, optionsRaw);\n\n\t\t// Break down by property name\n\t\tconst optionsStructure = DatasetUtils.requireExactKeys(options, [\n\t\t\t[Keywords.Columns, true],\n\t\t\t[Keywords.Order, false],\n\t\t]);\n\n\t\tconst [columnsForState, datasetIdForState] = this.parseColumns(optionsStructure);\n\t\tconst orderForState = this.processOrder(optionsStructure, datasetIdForState);\n\t\t// Ensure order field is selected in columns\n\t\tif (\n\t\t\torderForState !== undefined &&\n\t\t\tcolumnsForState.find((col) => col.field === orderForState?.field) === undefined\n\t\t) {\n\t\t\tthrow new InsightError(\"Order field not selected in columns.\");\n\t\t}\n\n\t\treturn {\n\t\t\tcolumns: columnsForState,\n\t\t\torder: orderForState,\n\t\t\tdatasetId: datasetIdForState,\n\t\t};\n\t}\n\n\t/**\n\t *\n\t * @param optionsStructure the parsed key-value structure of data in the options field\n\t * @returns parsed columns as InsightFacadeKeys and the dataset id used in the query\n\t */\n\tprivate parseColumns(optionsStructure: Map<string, unknown>): [InsightFacadeKey[], string] {\n\t\tlet columnsForState: InsightFacadeKey[] = [];\n\t\tlet datasetIdForState: string | undefined;\n\n\t\t// Process columns key list\n\t\tconst columns = DatasetUtils.checkIsArray(Keywords.Columns, optionsStructure.get(Keywords.Columns));\n\t\tcolumns.forEach((columnRaw) => {\n\t\t\t// Ensure column key has proper formatting\n\t\t\tconst column = DatasetUtils.checkIsString(Keywords.Columns, columnRaw);\n\t\t\tconst columnKey = DatasetUtils.parseMOrSKey(column);\n\t\t\tif (columnKey === undefined) {\n\t\t\t\tthrow new InsightError(\"Improper column key formatting: \" + column + \".\");\n\t\t\t}\n\t\t\t// Ensure multiple datasets not used in column keys\n\t\t\tif (datasetIdForState !== undefined && datasetIdForState !== columnKey.idstring) {\n\t\t\t\tthrow new InsightError(\"Multiple datasets used in query. Only one allowed.\");\n\t\t\t} else {\n\t\t\t\tdatasetIdForState = columnKey.idstring;\n\t\t\t}\n\t\t\tcolumnsForState = columnsForState.concat(columnKey);\n\t\t});\n\n\t\t// Query must have columns selected\n\t\tif (datasetIdForState === undefined) {\n\t\t\tthrow new InsightError(\"Query must select at least one column.\");\n\t\t}\n\n\t\treturn [columnsForState, datasetIdForState];\n\t}\n\n\t/**\n\t *\n\t * @param optionsStructure the parsed key-value structure of data in the options field\n\t * @returns an order if present, otherwise undefined\n\t */\n\tprivate processOrder(\n\t\toptionsStructure: Map<string, unknown>,\n\t\tdatasetIdForState: string\n\t): InsightFacadeKey | undefined {\n\t\tlet orderForState: InsightFacadeKey | undefined;\n\t\tif (optionsStructure.has(Keywords.Order) && optionsStructure.get(Keywords.Order) !== undefined) {\n\t\t\tconst order = DatasetUtils.checkIsString(Keywords.Order, optionsStructure.get(Keywords.Order));\n\t\t\tconst orderKey = DatasetUtils.parseMOrSKey(order);\n\t\t\tif (orderKey !== undefined) {\n\t\t\t\torderForState = orderKey;\n\t\t\t\tif (orderKey.idstring !== datasetIdForState) {\n\t\t\t\t\tthrow new InsightError(\"Mutliple datasets used in query. Only one allowed.\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new InsightError(\"Order is not a valid ID string: \" + order + \".\");\n\t\t\t}\n\t\t}\n\t\treturn orderForState;\n\t}\n\n\t/**\n\t *\n\t * @param query query object to take body from.\n\t * @param options the options state computed\n\t * @throws InsightError if body is malformed.\n\t */\n\tprivate processBody(bodyRaw: unknown): Section[] {\n\t\t// Find dataset\n\t\tconst dataset = DatasetUtils.findDataset(this.datasets, this.options!!.datasetId);\n\t\tif (dataset === undefined) {\n\t\t\tthrow new InsightError(\"Could not find dataset with id: \" + this.options!!.datasetId + \".\");\n\t\t}\n\n\t\t// Create filter object\n\t\tconst filter = new FilterBySection(dataset);\n\n\t\t// Start constructing filter function\n\t\tconst filterFunction = this.checkSingleFilter(filter, bodyRaw);\n\n\t\t// Execute filter function\n\t\tconst sections = filterFunction.apply();\n\n\t\tif (sections.length > maxResults) {\n\t\t\tthrow new ResultTooLargeError();\n\t\t}\n\n\t\treturn sections;\n\t}\n\n\t/**\n\t * Takes a section of the body and checks that a single filter is correctly applied within it.\n\t *\n\t * @param filter the filter object used\n\t * @param bodyRaw the raw body to check\n\t * @returns A filter operation representing the given body and filter\n\t * @throws InsightError if bodyRaw is improperly formatted\n\t */\n\tprivate checkSingleFilter(filter: FilterStrategy<any>, bodyRaw: unknown): FilterOperation {\n\t\t// Retrieve body and ensure it is JSON\n\t\tconst body = DatasetUtils.checkIsObject(Keywords.Body, bodyRaw);\n\n\t\t// Break do:wn by property name\n\t\tconst mappedKeys = DatasetUtils.requireExactKeys(body, [\n\t\t\t[Keywords.Filter.Logic.And, false],\n\t\t\t[Keywords.Filter.Logic.Or, false],\n\t\t\t[Keywords.Filter.MComparator.Equal, false],\n\t\t\t[Keywords.Filter.MComparator.GreaterThan, false],\n\t\t\t[Keywords.Filter.MComparator.LessThan, false],\n\t\t\t[Keywords.Filter.Negation.Not, false],\n\t\t\t[Keywords.Filter.SComparator.Is, false],\n\t\t]);\n\n\t\t// Only one root filter can be applied\n\t\tif (mappedKeys.size > 1) {\n\t\t\tthrow new InsightError(\"Can only have 1 filter applied here: \" + JSON.stringify(mappedKeys) + \".\");\n\t\t}\n\n\t\t// Base case filter: return everything\n\t\tlet filterOp = filter.all();\n\n\t\t// This will run 1 or 0 times\n\t\tmappedKeys.forEach((value, key) => (filterOp = this.processFilter(filter, key, value)));\n\n\t\treturn filterOp;\n\t}\n\n\t/**\n\t *\n\t * @param filter the filter object used\n\t * @param key the filter key to check\n\t * @param value the value of the filter key in the query object\n\t * @returns A filter operation for the given key and children\n\t * @throws InsightError if the provided key could not be processed correctly\n\t */\n\tprivate processFilter(filter: FilterStrategy<any>, key: string, value: unknown): FilterOperation {\n\t\tswitch (key) {\n\t\t\tcase Keywords.Filter.Logic.And:\n\t\t\tcase Keywords.Filter.Logic.Or: {\n\t\t\t\tconst array = DatasetUtils.checkIsArray(key, value);\n\t\t\t\tconst children = array.map((elem) => this.checkSingleFilter(filter, elem));\n\t\t\t\tif (children.length === 0) {\n\t\t\t\t\tthrow new InsightError(key + \" must have children\");\n\t\t\t\t}\n\t\t\t\treturn key === Keywords.Filter.Logic.And ? filter.and(children) : filter.or(children);\n\t\t\t}\n\t\t\tcase Keywords.Filter.MComparator.Equal:\n\t\t\tcase Keywords.Filter.MComparator.GreaterThan:\n\t\t\tcase Keywords.Filter.MComparator.LessThan: {\n\t\t\t\tconst [columnKey, filterVal] = this.checkKey(key, value, true);\n\t\t\t\tconst valNum = DatasetUtils.checkIsNumber(key, filterVal);\n\t\t\t\treturn key === Keywords.Filter.MComparator.Equal\n\t\t\t\t\t? filter.equals(valNum, columnKey)\n\t\t\t\t\t: key === Keywords.Filter.MComparator.LessThan\n\t\t\t\t\t? filter.lessThan(valNum, columnKey)\n\t\t\t\t\t: filter.greaterThan(valNum, columnKey);\n\t\t\t}\n\t\t\tcase Keywords.Filter.Negation.Not:\n\t\t\t\treturn filter.not(this.checkSingleFilter(filter, value));\n\t\t\tcase Keywords.Filter.SComparator.Is: {\n\t\t\t\tconst [columnKey, filterVal] = this.checkKey(Keywords.Filter.SComparator.Is, value, false);\n\t\t\t\tconst valStr = DatasetUtils.checkIsString(Keywords.Filter.SComparator.Is, filterVal);\n\t\t\t\treturn filter.is(valStr, columnKey);\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tthrow new InsightError(\"Filter key not recognized: \" + key);\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param type the key type checking under (ie. Keywords.Filter.MComparator.Equal)\n\t * @param bodyRaw the raw body under this key (ie. { \"key\": \"value\" })\n\t * @param mkeyOrSKey true if mkey false if skey\n\t * @returns a tuple of the parsed key and value\n\t */\n\tprivate checkKey(type: string, bodyRaw: unknown, mkeyOrSKey: boolean): [InsightFacadeKey, unknown] {\n\t\t// Ensure child is an object\n\t\tconst keyBody = DatasetUtils.checkIsObject(type, bodyRaw);\n\t\t// Ensure body has a single key value pair\n\t\tconst bodyEntries = Array.from(Object.entries(keyBody));\n\t\tif (bodyEntries.length !== 1) {\n\t\t\tthrow new InsightError(\"Expected one entry in an mkey field.\");\n\t\t}\n\n\t\t// Check that entry has properly formatted key and value\n\t\tconst key = DatasetUtils.parseMOrSKey(bodyEntries[0][0]);\n\t\tconst keyValue = bodyEntries[0][1];\n\n\t\tif (key === undefined) {\n\t\t\tthrow new InsightError(\"Improper structure of key: \" + bodyEntries[0][0]);\n\t\t}\n\n\t\t// Check for multi datasets used\n\t\tif (this.options!!.datasetId !== key.idstring) {\n\t\t\tthrow new InsightError(\"Only one dataset can be used in a query.\");\n\t\t}\n\n\t\tif (DatasetUtils.isMKey(key)) {\n\t\t\tif (!mkeyOrSKey) {\n\t\t\t\tthrow new InsightError(\"Expected mkey but got skey.\");\n\t\t\t}\n\t\t\treturn [key, keyValue];\n\t\t} else if (DatasetUtils.isSKey(key)) {\n\t\t\tif (mkeyOrSKey) {\n\t\t\t\tthrow new InsightError(\"Expected skey but got mkey.\");\n\t\t\t}\n\t\t\treturn [key, keyValue];\n\t\t} else {\n\t\t\tthrow new InsightError(\"Unexpected key type: \" + type + \", \" + bodyEntries[0][0]);\n\t\t}\n\t}\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c1677a84462ebf6ef99793163690a0cb29ee73f0","contentHash":"03e1ca75c4fc481011e59f25cf276277e05eebf5316fe7c7ef3fe7802410fa96"},"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/Filter.ts":{"path":"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/Filter.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"2":{"start":{"line":4,"column":18},"end":{"line":4,"column":38}},"3":{"start":{"line":5,"column":25},"end":{"line":5,"column":52}},"4":{"start":{"line":7,"column":0},"end":{"line":16,"column":36}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":46}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":44}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":56}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":62}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":52}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":44}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":46}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":46}},"13":{"start":{"line":25,"column":8},"end":{"line":25,"column":32}},"14":{"start":{"line":26,"column":8},"end":{"line":26,"column":38}},"15":{"start":{"line":27,"column":8},"end":{"line":27,"column":40}},"16":{"start":{"line":28,"column":8},"end":{"line":28,"column":30}},"17":{"start":{"line":29,"column":8},"end":{"line":29,"column":30}},"18":{"start":{"line":30,"column":8},"end":{"line":30,"column":30}},"19":{"start":{"line":33,"column":25},"end":{"line":33,"column":27}},"20":{"start":{"line":34,"column":8},"end":{"line":41,"column":9}},"21":{"start":{"line":35,"column":12},"end":{"line":37,"column":13}},"22":{"start":{"line":36,"column":16},"end":{"line":36,"column":65}},"23":{"start":{"line":38,"column":12},"end":{"line":40,"column":13}},"24":{"start":{"line":39,"column":16},"end":{"line":39,"column":39}},"25":{"start":{"line":42,"column":8},"end":{"line":42,"column":24}},"26":{"start":{"line":45,"column":8},"end":{"line":74,"column":9}},"27":{"start":{"line":47,"column":16},"end":{"line":47,"column":28}},"28":{"start":{"line":49,"column":16},"end":{"line":49,"column":70}},"29":{"start":{"line":51,"column":16},"end":{"line":51,"column":94}},"30":{"start":{"line":53,"column":16},"end":{"line":53,"column":68}},"31":{"start":{"line":55,"column":16},"end":{"line":55,"column":68}},"32":{"start":{"line":57,"column":16},"end":{"line":57,"column":66}},"33":{"start":{"line":59,"column":16},"end":{"line":63,"column":17}},"34":{"start":{"line":60,"column":20},"end":{"line":62,"column":21}},"35":{"start":{"line":61,"column":24},"end":{"line":61,"column":37}},"36":{"start":{"line":64,"column":16},"end":{"line":64,"column":28}},"37":{"start":{"line":66,"column":16},"end":{"line":70,"column":17}},"38":{"start":{"line":67,"column":20},"end":{"line":69,"column":21}},"39":{"start":{"line":68,"column":24},"end":{"line":68,"column":36}},"40":{"start":{"line":71,"column":16},"end":{"line":71,"column":29}},"41":{"start":{"line":73,"column":16},"end":{"line":73,"column":101}},"42":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"43":{"start":{"line":78,"column":12},"end":{"line":78,"column":37}},"44":{"start":{"line":80,"column":23},"end":{"line":80,"column":48}},"45":{"start":{"line":81,"column":21},"end":{"line":81,"column":44}},"46":{"start":{"line":82,"column":33},"end":{"line":82,"column":73}},"47":{"start":{"line":83,"column":31},"end":{"line":83,"column":75}},"48":{"start":{"line":84,"column":40},"end":{"line":84,"column":114}},"49":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"50":{"start":{"line":86,"column":12},"end":{"line":86,"column":101}},"51":{"start":{"line":88,"column":8},"end":{"line":102,"column":9}},"52":{"start":{"line":89,"column":12},"end":{"line":89,"column":64}},"53":{"start":{"line":91,"column":13},"end":{"line":102,"column":9}},"54":{"start":{"line":92,"column":12},"end":{"line":92,"column":57}},"55":{"start":{"line":94,"column":13},"end":{"line":102,"column":9}},"56":{"start":{"line":95,"column":12},"end":{"line":95,"column":57}},"57":{"start":{"line":97,"column":13},"end":{"line":102,"column":9}},"58":{"start":{"line":98,"column":12},"end":{"line":98,"column":101}},"59":{"start":{"line":101,"column":12},"end":{"line":101,"column":44}},"60":{"start":{"line":108,"column":8},"end":{"line":108,"column":31}},"61":{"start":{"line":111,"column":8},"end":{"line":115,"column":11}},"62":{"start":{"line":118,"column":8},"end":{"line":122,"column":11}},"63":{"start":{"line":125,"column":8},"end":{"line":130,"column":11}},"64":{"start":{"line":133,"column":8},"end":{"line":138,"column":11}},"65":{"start":{"line":141,"column":8},"end":{"line":146,"column":11}},"66":{"start":{"line":149,"column":8},"end":{"line":154,"column":11}},"67":{"start":{"line":157,"column":8},"end":{"line":161,"column":11}},"68":{"start":{"line":164,"column":8},"end":{"line":167,"column":11}},"69":{"start":{"line":170,"column":0},"end":{"line":170,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":1},"end":{"line":7,"column":2}},"loc":{"start":{"line":7,"column":23},"end":{"line":16,"column":1}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":24},"end":{"line":31,"column":5}},"line":24},"2":{"name":"(anonymous_2)","decl":{"start":{"line":32,"column":4},"end":{"line":32,"column":5}},"loc":{"start":{"line":32,"column":12},"end":{"line":43,"column":5}},"line":32},"3":{"name":"(anonymous_3)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":36},"end":{"line":75,"column":5}},"line":44},"4":{"name":"(anonymous_4)","decl":{"start":{"line":76,"column":4},"end":{"line":76,"column":5}},"loc":{"start":{"line":76,"column":55},"end":{"line":103,"column":5}},"line":76},"5":{"name":"(anonymous_5)","decl":{"start":{"line":107,"column":4},"end":{"line":107,"column":5}},"loc":{"start":{"line":107,"column":25},"end":{"line":109,"column":5}},"line":107},"6":{"name":"(anonymous_6)","decl":{"start":{"line":110,"column":4},"end":{"line":110,"column":5}},"loc":{"start":{"line":110,"column":17},"end":{"line":116,"column":5}},"line":110},"7":{"name":"(anonymous_7)","decl":{"start":{"line":117,"column":4},"end":{"line":117,"column":5}},"loc":{"start":{"line":117,"column":18},"end":{"line":123,"column":5}},"line":117},"8":{"name":"(anonymous_8)","decl":{"start":{"line":124,"column":4},"end":{"line":124,"column":5}},"loc":{"start":{"line":124,"column":26},"end":{"line":131,"column":5}},"line":124},"9":{"name":"(anonymous_9)","decl":{"start":{"line":132,"column":4},"end":{"line":132,"column":5}},"loc":{"start":{"line":132,"column":29},"end":{"line":139,"column":5}},"line":132},"10":{"name":"(anonymous_10)","decl":{"start":{"line":140,"column":4},"end":{"line":140,"column":5}},"loc":{"start":{"line":140,"column":24},"end":{"line":147,"column":5}},"line":140},"11":{"name":"(anonymous_11)","decl":{"start":{"line":148,"column":4},"end":{"line":148,"column":5}},"loc":{"start":{"line":148,"column":22},"end":{"line":155,"column":5}},"line":148},"12":{"name":"(anonymous_12)","decl":{"start":{"line":156,"column":4},"end":{"line":156,"column":5}},"loc":{"start":{"line":156,"column":15},"end":{"line":162,"column":5}},"line":156},"13":{"name":"(anonymous_13)","decl":{"start":{"line":163,"column":4},"end":{"line":163,"column":5}},"loc":{"start":{"line":163,"column":10},"end":{"line":168,"column":5}},"line":163}},"branchMap":{"0":{"loc":{"start":{"line":16,"column":3},"end":{"line":16,"column":34}},"type":"binary-expr","locations":[{"start":{"line":16,"column":3},"end":{"line":16,"column":13}},{"start":{"line":16,"column":18},"end":{"line":16,"column":33}}],"line":16},"1":{"loc":{"start":{"line":35,"column":12},"end":{"line":37,"column":13}},"type":"if","locations":[{"start":{"line":35,"column":12},"end":{"line":37,"column":13}},{"start":{"line":35,"column":12},"end":{"line":37,"column":13}}],"line":35},"2":{"loc":{"start":{"line":38,"column":12},"end":{"line":40,"column":13}},"type":"if","locations":[{"start":{"line":38,"column":12},"end":{"line":40,"column":13}},{"start":{"line":38,"column":12},"end":{"line":40,"column":13}}],"line":38},"3":{"loc":{"start":{"line":45,"column":8},"end":{"line":74,"column":9}},"type":"switch","locations":[{"start":{"line":46,"column":12},"end":{"line":47,"column":28}},{"start":{"line":48,"column":12},"end":{"line":49,"column":70}},{"start":{"line":50,"column":12},"end":{"line":51,"column":94}},{"start":{"line":52,"column":12},"end":{"line":53,"column":68}},{"start":{"line":54,"column":12},"end":{"line":55,"column":68}},{"start":{"line":56,"column":12},"end":{"line":57,"column":66}},{"start":{"line":58,"column":12},"end":{"line":64,"column":28}},{"start":{"line":65,"column":12},"end":{"line":71,"column":29}},{"start":{"line":72,"column":12},"end":{"line":73,"column":101}}],"line":45},"4":{"loc":{"start":{"line":60,"column":20},"end":{"line":62,"column":21}},"type":"if","locations":[{"start":{"line":60,"column":20},"end":{"line":62,"column":21}},{"start":{"line":60,"column":20},"end":{"line":62,"column":21}}],"line":60},"5":{"loc":{"start":{"line":67,"column":20},"end":{"line":69,"column":21}},"type":"if","locations":[{"start":{"line":67,"column":20},"end":{"line":69,"column":21}},{"start":{"line":67,"column":20},"end":{"line":69,"column":21}}],"line":67},"6":{"loc":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"type":"if","locations":[{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},{"start":{"line":77,"column":8},"end":{"line":79,"column":9}}],"line":77},"7":{"loc":{"start":{"line":84,"column":40},"end":{"line":84,"column":114}},"type":"cond-expr","locations":[{"start":{"line":84,"column":65},"end":{"line":84,"column":67}},{"start":{"line":84,"column":70},"end":{"line":84,"column":114}}],"line":84},"8":{"loc":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},{"start":{"line":85,"column":8},"end":{"line":87,"column":9}}],"line":85},"9":{"loc":{"start":{"line":88,"column":8},"end":{"line":102,"column":9}},"type":"if","locations":[{"start":{"line":88,"column":8},"end":{"line":102,"column":9}},{"start":{"line":88,"column":8},"end":{"line":102,"column":9}}],"line":88},"10":{"loc":{"start":{"line":88,"column":12},"end":{"line":88,"column":26}},"type":"binary-expr","locations":[{"start":{"line":88,"column":12},"end":{"line":88,"column":18}},{"start":{"line":88,"column":22},"end":{"line":88,"column":26}}],"line":88},"11":{"loc":{"start":{"line":91,"column":13},"end":{"line":102,"column":9}},"type":"if","locations":[{"start":{"line":91,"column":13},"end":{"line":102,"column":9}},{"start":{"line":91,"column":13},"end":{"line":102,"column":9}}],"line":91},"12":{"loc":{"start":{"line":94,"column":13},"end":{"line":102,"column":9}},"type":"if","locations":[{"start":{"line":94,"column":13},"end":{"line":102,"column":9}},{"start":{"line":94,"column":13},"end":{"line":102,"column":9}}],"line":94},"13":{"loc":{"start":{"line":97,"column":13},"end":{"line":102,"column":9}},"type":"if","locations":[{"start":{"line":97,"column":13},"end":{"line":102,"column":9}},{"start":{"line":97,"column":13},"end":{"line":102,"column":9}}],"line":97}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":419,"14":419,"15":419,"16":419,"17":419,"18":419,"19":29,"20":29,"21":1586301,"22":3,"23":1586298,"24":20295,"25":24,"26":3687773,"27":5001,"28":412832,"29":635008,"30":876416,"31":165164,"32":134688,"33":1174603,"34":1329894,"35":1170521,"36":4080,"37":284061,"38":636893,"39":7323,"40":276737,"41":0,"42":635008,"43":6,"44":635002,"45":635002,"46":635002,"47":635002,"48":635002,"49":635002,"50":2,"51":635000,"52":70075,"53":564925,"54":64612,"55":500313,"56":0,"57":500313,"58":0,"59":500313,"60":56,"61":7,"62":31,"63":25,"64":33,"65":14,"66":52,"67":15,"68":242,"69":1},"f":{"0":1,"1":419,"2":29,"3":3687773,"4":635008,"5":56,"6":7,"7":31,"8":25,"9":33,"10":14,"11":52,"12":15,"13":242},"b":{"0":[1,1],"1":[3,1586298],"2":[20295,1566001],"3":[5001,412832,635008,876416,165164,134688,1174603,284061,0],"4":[1170521,159371],"5":[7323,629569],"6":[6,635002],"7":[5001,630001],"8":[2,635000],"9":[70075,564925],"10":[635000,134687],"11":[64612,500313],"12":[0,500313],"13":[0,500313]},"inputSourceMap":{"version":3,"file":"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/Filter.ts","sources":["/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/Filter.ts"],"names":[],"mappings":"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","sourcesContent":["import { SectionsDataset, InsightFacadeKey, maxResults, Section } from \"./Dataset\";\nimport { InsightError, ResultTooLargeError } from \"./IInsightFacade\";\n\nenum FilterName {\n\tAnd,\n\tOr,\n\tLessThan,\n\tGreaterThan,\n\tEquals,\n\tIs,\n\tNot,\n\tAll,\n}\n\nexport interface FilterOperation {\n\tname: FilterName;\n\tapply: () => Section[];\n}\n\nexport interface FilterStrategy<FO extends FilterOperation> {\n\tor(children: FO[]): FO;\n\tand(children: FO[]): FO;\n\tlessThan(limit: number, mkey: InsightFacadeKey): FO;\n\tgreaterThan(limit: number, mkey: InsightFacadeKey): FO;\n\tequals(limit: number, mkey: InsightFacadeKey): FO;\n\tis(compare: string, skey: InsightFacadeKey): FO;\n\tnot(child: FO): FO;\n\tall(): FO;\n}\n\nclass FilterOperationBySection implements FilterOperation {\n\tprivate readonly dataset: SectionsDataset;\n\tpublic readonly name: FilterName;\n\tprivate readonly children?: FilterOperationBySection[];\n\tprivate readonly num?: number;\n\tprivate readonly str?: string;\n\tprivate readonly key?: InsightFacadeKey;\n\n\t/**\n\t *\n\t * @param dataset the dataset to use for this query\n\t * @param name the name of the filter\n\t * @param children children if this filter has children (AND, OR)\n\t * @param num a number argument if this filter has one (EQ, LT, GT)\n\t * @param str a string argument if this filter has one (IS)\n\t * @param key a key argument if this filter has one (EQ, LT, GT, IS)\n\t */\n\tconstructor(params: {\n\t\tdataset: SectionsDataset;\n\t\tname: FilterName;\n\t\tchildren?: FilterOperationBySection[];\n\t\tnum?: number;\n\t\tstr?: string;\n\t\tkey?: InsightFacadeKey;\n\t}) {\n\t\tthis.name = params.name;\n\t\tthis.dataset = params.dataset;\n\t\tthis.children = params.children;\n\t\tthis.num = params.num;\n\t\tthis.str = params.str;\n\t\tthis.key = params.key;\n\t}\n\n\tpublic apply(): Section[] {\n\t\tconst selected: Section[] = [];\n\t\tfor (const section of this.dataset.members) {\n\t\t\t// Early abort if too many\n\t\t\tif (selected.length > maxResults) {\n\t\t\t\tthrow new ResultTooLargeError();\n\t\t\t}\n\t\t\t// Check section valid under filter\n\t\t\tif (FilterOperationBySection.test(this, section)) {\n\t\t\t\tselected.push(section);\n\t\t\t}\n\t\t}\n\t\treturn selected;\n\t}\n\n\t/**\n\t *\n\t * @param operation the root filter operation to process\n\t * @param section the section to validate\n\t * @returns whether the given section is valid under the given filter operation\n\t */\n\tprivate static test(operation: FilterOperationBySection, section: Section): boolean {\n\t\tswitch (operation.name) {\n\t\t\tcase FilterName.All:\n\t\t\t\treturn true;\n\t\t\tcase FilterName.Equals:\n\t\t\t\treturn section[operation.key!!.field] === operation.num!!;\n\t\t\tcase FilterName.Is:\n\t\t\t\treturn this.validateFilterString(operation.str!!, section[operation.key!!.field] as string);\n\t\t\tcase FilterName.GreaterThan:\n\t\t\t\treturn (section[operation.key!!.field] as number) > operation.num!!;\n\t\t\tcase FilterName.LessThan:\n\t\t\t\treturn (section[operation.key!!.field] as number) < operation.num!!;\n\t\t\tcase FilterName.Not:\n\t\t\t\treturn !this.test(operation.children!![0], section);\n\t\t\tcase FilterName.And:\n\t\t\t\tfor (const child of operation.children!!) {\n\t\t\t\t\tif (!this.test(child, section)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\tcase FilterName.Or:\n\t\t\t\tfor (const child of operation.children!!) {\n\t\t\t\t\tif (this.test(child, section)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\tdefault:\n\t\t\t\tthrow new InsightError(\"Unexpected filter name: \" + operation.name);\n\t\t}\n\t}\n\n\t/**\n\t * Takes care of asterisks in string to filter\n\t *\n\t * @param filterStr the string provided in the filter\n\t * @param sectionStr the section string to test against\n\t */\n\tprivate static validateFilterString(filterStr: string, sectionStr: string): boolean {\n\t\tif (filterStr === \"\") {\n\t\t\treturn \"\" === sectionStr;\n\t\t}\n\n\t\tconst aStart = filterStr.startsWith(\"*\");\n\t\tconst aEnd = filterStr.endsWith(\"*\");\n\t\tconst startCharRemoved = filterStr.substring(1, filterStr.length);\n\t\tconst endCharRemoved = filterStr.substring(0, filterStr.length - 1);\n\t\tconst startAndEndCharsRemoved = filterStr.length === 1 ? \"\" : filterStr.substring(1, filterStr.length - 1);\n\n\t\tif (startAndEndCharsRemoved.includes(\"*\")) {\n\t\t\tthrow new InsightError(\"Asterisk must occur at start or end of string\");\n\t\t}\n\n\t\tif (aStart && aEnd) {\n\t\t\treturn sectionStr.includes(startAndEndCharsRemoved);\n\t\t} else if (aStart) {\n\t\t\treturn sectionStr.endsWith(startCharRemoved);\n\t\t} else if (aEnd) {\n\t\t\treturn sectionStr.startsWith(endCharRemoved);\n\t\t} else if (filterStr.includes(\"*\")) {\n\t\t\tthrow new InsightError(\"Asterisk must occur at start or end of string\");\n\t\t} else {\n\t\t\treturn filterStr === sectionStr;\n\t\t}\n\t}\n}\n\nexport class FilterBySection implements FilterStrategy<FilterOperationBySection> {\n\tprivate dataset: SectionsDataset;\n\n\t/**\n\t *\n\t * @param dp the datasets provider\n\t * @param options the options for the given query\n\t */\n\tconstructor(dataset: SectionsDataset) {\n\t\tthis.dataset = dataset;\n\t}\n\n\tpublic or(children: FilterOperationBySection[]): FilterOperationBySection {\n\t\treturn new FilterOperationBySection({\n\t\t\tdataset: this.dataset,\n\t\t\tname: FilterName.Or,\n\t\t\tchildren: children,\n\t\t});\n\t}\n\n\tpublic and(children: FilterOperationBySection[]): FilterOperationBySection {\n\t\treturn new FilterOperationBySection({\n\t\t\tdataset: this.dataset,\n\t\t\tname: FilterName.And,\n\t\t\tchildren: children,\n\t\t});\n\t}\n\tpublic lessThan(limit: number, mkey: InsightFacadeKey): FilterOperationBySection {\n\t\treturn new FilterOperationBySection({\n\t\t\tdataset: this.dataset,\n\t\t\tname: FilterName.LessThan,\n\t\t\tkey: mkey,\n\t\t\tnum: limit,\n\t\t});\n\t}\n\tpublic greaterThan(limit: number, mkey: InsightFacadeKey): FilterOperationBySection {\n\t\treturn new FilterOperationBySection({\n\t\t\tdataset: this.dataset,\n\t\t\tname: FilterName.GreaterThan,\n\t\t\tkey: mkey,\n\t\t\tnum: limit,\n\t\t});\n\t}\n\n\tpublic equals(limit: number, mkey: InsightFacadeKey): FilterOperationBySection {\n\t\treturn new FilterOperationBySection({\n\t\t\tdataset: this.dataset,\n\t\t\tname: FilterName.Equals,\n\t\t\tkey: mkey,\n\t\t\tnum: limit,\n\t\t});\n\t}\n\n\tpublic is(compare: string, skey: InsightFacadeKey): FilterOperationBySection {\n\t\treturn new FilterOperationBySection({\n\t\t\tdataset: this.dataset,\n\t\t\tname: FilterName.Is,\n\t\t\tkey: skey,\n\t\t\tstr: compare,\n\t\t});\n\t}\n\n\tpublic not(child: FilterOperationBySection): FilterOperationBySection {\n\t\treturn new FilterOperationBySection({\n\t\t\tdataset: this.dataset,\n\t\t\tname: FilterName.Not,\n\t\t\tchildren: [child],\n\t\t});\n\t}\n\n\tpublic all(): FilterOperationBySection {\n\t\treturn new FilterOperationBySection({\n\t\t\tdataset: this.dataset,\n\t\t\tname: FilterName.All,\n\t\t});\n\t}\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1ad67cf776d9d08f019b00db7ce93b6fdc217c95","contentHash":"36567a3a590d89dbc2af5489e9227842be9765773c11a8af03380dcdb788597f"},"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/PersistantData.ts":{"path":"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/PersistantData.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":19},"end":{"line":3,"column":38}},"2":{"start":{"line":4,"column":25},"end":{"line":4,"column":52}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":22}},"4":{"start":{"line":6,"column":18},"end":{"line":6,"column":40}},"5":{"start":{"line":11,"column":8},"end":{"line":11,"column":32}},"6":{"start":{"line":12,"column":8},"end":{"line":12,"column":52}},"7":{"start":{"line":15,"column":8},"end":{"line":15,"column":40}},"8":{"start":{"line":16,"column":8},"end":{"line":16,"column":29}},"9":{"start":{"line":19,"column":8},"end":{"line":19,"column":45}},"10":{"start":{"line":22,"column":8},"end":{"line":22,"column":42}},"11":{"start":{"line":25,"column":8},"end":{"line":25,"column":33}},"12":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"13":{"start":{"line":29,"column":12},"end":{"line":29,"column":19}},"14":{"start":{"line":31,"column":8},"end":{"line":40,"column":9}},"15":{"start":{"line":32,"column":12},"end":{"line":35,"column":13}},"16":{"start":{"line":33,"column":31},"end":{"line":33,"column":72}},"17":{"start":{"line":34,"column":16},"end":{"line":34,"column":39}},"18":{"start":{"line":36,"column":12},"end":{"line":36,"column":35}},"19":{"start":{"line":39,"column":12},"end":{"line":39,"column":107}},"20":{"start":{"line":43,"column":8},"end":{"line":55,"column":9}},"21":{"start":{"line":44,"column":12},"end":{"line":50,"column":13}},"22":{"start":{"line":45,"column":16},"end":{"line":49,"column":17}},"23":{"start":{"line":46,"column":20},"end":{"line":46,"column":57}},"24":{"start":{"line":51,"column":12},"end":{"line":51,"column":70}},"25":{"start":{"line":54,"column":12},"end":{"line":54,"column":106}},"26":{"start":{"line":58,"column":0},"end":{"line":58,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":18},"end":{"line":13,"column":5}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":24},"end":{"line":17,"column":5}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":38},"end":{"line":20,"column":5}},"line":18},"3":{"name":"(anonymous_3)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":35},"end":{"line":23,"column":5}},"line":21},"4":{"name":"(anonymous_4)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":32},"end":{"line":26,"column":5}},"line":24},"5":{"name":"(anonymous_5)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":31},"end":{"line":41,"column":5}},"line":27},"6":{"name":"(anonymous_6)","decl":{"start":{"line":42,"column":4},"end":{"line":42,"column":5}},"loc":{"start":{"line":42,"column":22},"end":{"line":56,"column":5}},"line":42}},"branchMap":{"0":{"loc":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},{"start":{"line":28,"column":8},"end":{"line":30,"column":9}}],"line":28},"1":{"loc":{"start":{"line":32,"column":12},"end":{"line":35,"column":13}},"type":"if","locations":[{"start":{"line":32,"column":12},"end":{"line":35,"column":13}},{"start":{"line":32,"column":12},"end":{"line":35,"column":13}}],"line":32},"2":{"loc":{"start":{"line":44,"column":12},"end":{"line":50,"column":13}},"type":"if","locations":[{"start":{"line":44,"column":12},"end":{"line":50,"column":13}},{"start":{"line":44,"column":12},"end":{"line":50,"column":13}}],"line":44}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":32,"6":32,"7":165,"8":165,"9":27,"10":2,"11":2,"12":165,"13":134,"14":31,"15":31,"16":0,"17":0,"18":31,"19":0,"20":31,"21":31,"22":21,"23":21,"24":31,"25":0,"26":1},"f":{"0":32,"1":165,"2":27,"3":2,"4":2,"5":165,"6":31},"b":{"0":[134,31],"1":[0,31],"2":[21,10]},"inputSourceMap":{"version":3,"file":"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/PersistantData.ts","sources":["/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/PersistantData.ts"],"names":[],"mappings":";;AAAA,uCAAkE;AAElE,qDAAgD;AAEhD,MAAM,OAAO,GAAG,MAAM,CAAC;AACvB,MAAM,SAAS,GAAG,OAAO,GAAG,YAAY,CAAC;AAEzC,MAAqB,cAAc;IAC1B,UAAU,CAAU;IACpB,QAAQ,CAAc;IAE9B;QACC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,QAAQ,GAAG,EAAE,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC;IAC7C,CAAC;IAEM,KAAK,CAAC,WAAW;QACvB,MAAM,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAChC,OAAO,IAAI,CAAC,QAAU,CAAC;IACxB,CAAC;IAEM,KAAK,CAAC,kBAAkB,CAAC,OAAwB;QACvD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACtC,CAAC;IAEM,KAAK,CAAC,eAAe,CAAC,OAAqB;QACjD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACnC,CAAC;IAEM,KAAK,CAAC,WAAW,CAAC,QAAqB;QAC7C,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC1B,CAAC;IAEO,KAAK,CAAC,kBAAkB;QAC/B,IAAI,IAAI,CAAC,UAAU,EAAE;YACpB,OAAO;SACP;QACD,IAAI;YACH,IAAI,MAAM,IAAA,qBAAU,EAAC,SAAS,CAAC,EAAE;gBAChC,MAAM,MAAM,GAAG,MAAM,IAAA,mBAAQ,EAAC,SAAS,CAAC,CAAC;gBACzC,IAAI,CAAC,QAAQ,GAAG,MAAqB,CAAC;aACtC;YACD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;SACvB;QAAC,OAAO,CAAC,EAAE;YACX,MAAM,IAAI,6BAAY,CAAC,iCAAiC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;SAC9E;IACF,CAAC;IAEM,KAAK,CAAC,SAAS;QACrB,IAAI;YACH,IAAI,CAAC,CAAC,MAAM,IAAA,qBAAU,EAAC,OAAO,CAAC,CAAC,EAAE;gBACjC,IAAI;oBACH,MAAM,IAAA,gBAAK,EAAC,OAAO,CAAC,CAAC;iBACrB;gBAAC,OAAO,EAAE,EAAE;iBAEZ;aACD;YACD,MAAM,IAAA,oBAAS,EAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC1C;QAAC,OAAO,CAAC,EAAE;YACX,MAAM,IAAI,6BAAY,CAAC,gCAAgC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;SAC7E;IACF,CAAC;CACD;AAvDD,iCAuDC","sourcesContent":["import { mkdir, pathExists, readJSON, writeJSON } from \"fs-extra\";\nimport { SectionsDataset, DatasetList, RoomsDataset } from \"./Dataset\";\nimport { InsightError } from \"./IInsightFacade\";\n\nconst dataDir = \"data\";\nconst writePath = dataDir + \"/data.json\";\n\nexport default class PersistantData {\n\tprivate loadedData: boolean;\n\tprivate datasets: DatasetList;\n\n\tconstructor() {\n\t\tthis.loadedData = false;\n\t\tthis.datasets = { sections: [], rooms: [] };\n\t}\n\n\tpublic async getDatasets(): Promise<DatasetList> {\n\t\tawait this.loadDataIfRequired();\n\t\treturn this.datasets!!;\n\t}\n\n\tpublic async addSectionsDataset(dataset: SectionsDataset): Promise<void> {\n\t\tthis.datasets.sections.push(dataset);\n\t}\n\n\tpublic async addRoomsDataset(dataset: RoomsDataset): Promise<void> {\n\t\tthis.datasets.rooms.push(dataset);\n\t}\n\n\tpublic async setDatasets(datasets: DatasetList): Promise<void> {\n\t\tthis.datasets = datasets;\n\t}\n\n\tprivate async loadDataIfRequired(): Promise<void> {\n\t\tif (this.loadedData) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tif (await pathExists(writePath)) {\n\t\t\t\tconst pkgObj = await readJSON(writePath);\n\t\t\t\tthis.datasets = pkgObj as DatasetList;\n\t\t\t}\n\t\t\tthis.loadedData = true;\n\t\t} catch (e) {\n\t\t\tthrow new InsightError(\"Failed to read data from disc: \" + JSON.stringify(e));\n\t\t}\n\t}\n\n\tpublic async writeData(): Promise<void> {\n\t\ttry {\n\t\t\tif (!(await pathExists(dataDir))) {\n\t\t\t\ttry {\n\t\t\t\t\tawait mkdir(dataDir);\n\t\t\t\t} catch (_e) {\n\t\t\t\t\t// Its fine\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait writeJSON(writePath, this.datasets);\n\t\t} catch (e) {\n\t\t\tthrow new InsightError(\"Failed to write data to disc: \" + JSON.stringify(e));\n\t\t}\n\t}\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"aeb9eeb15fc0d2b762c851c6499bd29bfa32b04e","contentHash":"74e6552add6cd831f1ccbc710f986493814544682719c8d3a2a64c87d9508a6c"},"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/SectionsDatasetProcessor.ts":{"path":"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/SectionsDatasetProcessor.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":18},"end":{"line":3,"column":38}},"2":{"start":{"line":4,"column":25},"end":{"line":4,"column":52}},"3":{"start":{"line":7,"column":25},"end":{"line":7,"column":81}},"4":{"start":{"line":8,"column":30},"end":{"line":8,"column":56}},"5":{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},"6":{"start":{"line":10,"column":12},"end":{"line":10,"column":74}},"7":{"start":{"line":12,"column":28},"end":{"line":12,"column":57}},"8":{"start":{"line":13,"column":33},"end":{"line":13,"column":108}},"9":{"start":{"line":13,"column":62},"end":{"line":13,"column":107}},"10":{"start":{"line":14,"column":35},"end":{"line":28,"column":10}},"11":{"start":{"line":15,"column":32},"end":{"line":15,"column":58}},"12":{"start":{"line":16,"column":12},"end":{"line":27,"column":13}},"13":{"start":{"line":17,"column":35},"end":{"line":17,"column":58}},"14":{"start":{"line":18,"column":41},"end":{"line":18,"column":99}},"15":{"start":{"line":19,"column":36},"end":{"line":19,"column":111}},"16":{"start":{"line":20,"column":43},"end":{"line":20,"column":122}},"17":{"start":{"line":21,"column":37},"end":{"line":21,"column":90}},"18":{"start":{"line":21,"column":67},"end":{"line":21,"column":89}},"19":{"start":{"line":22,"column":45},"end":{"line":22,"column":88}},"20":{"start":{"line":22,"column":72},"end":{"line":22,"column":87}},"21":{"start":{"line":23,"column":16},"end":{"line":23,"column":44}},"22":{"start":{"line":26,"column":16},"end":{"line":26,"column":26}},"23":{"start":{"line":29,"column":37},"end":{"line":29,"column":81}},"24":{"start":{"line":30,"column":25},"end":{"line":32,"column":46}},"25":{"start":{"line":31,"column":32},"end":{"line":31,"column":61}},"26":{"start":{"line":32,"column":33},"end":{"line":32,"column":45}},"27":{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},"28":{"start":{"line":34,"column":12},"end":{"line":34,"column":91}},"29":{"start":{"line":36,"column":8},"end":{"line":36,"column":24}},"30":{"start":{"line":38,"column":25},"end":{"line":50,"column":5}},"31":{"start":{"line":52,"column":8},"end":{"line":65,"column":9}},"32":{"start":{"line":53,"column":40},"end":{"line":53,"column":100}},"33":{"start":{"line":54,"column":24},"end":{"line":54,"column":100}},"34":{"start":{"line":55,"column":12},"end":{"line":58,"column":13}},"35":{"start":{"line":56,"column":43},"end":{"line":56,"column":47}},"36":{"start":{"line":57,"column":16},"end":{"line":57,"column":52}},"37":{"start":{"line":59,"column":12},"end":{"line":59,"column":34}},"38":{"start":{"line":60,"column":31},"end":{"line":60,"column":117}},"39":{"start":{"line":60,"column":81},"end":{"line":60,"column":116}},"40":{"start":{"line":61,"column":12},"end":{"line":61,"column":50}},"41":{"start":{"line":64,"column":12},"end":{"line":64,"column":29}},"42":{"start":{"line":68,"column":24},"end":{"line":68,"column":57}},"43":{"start":{"line":69,"column":8},"end":{"line":91,"column":9}},"44":{"start":{"line":71,"column":12},"end":{"line":76,"column":13}},"45":{"start":{"line":72,"column":16},"end":{"line":72,"column":89}},"46":{"start":{"line":75,"column":16},"end":{"line":75,"column":110}},"47":{"start":{"line":77,"column":12},"end":{"line":77,"column":37}},"48":{"start":{"line":79,"column":13},"end":{"line":91,"column":9}},"49":{"start":{"line":81,"column":12},"end":{"line":86,"column":13}},"50":{"start":{"line":82,"column":16},"end":{"line":82,"column":89}},"51":{"start":{"line":85,"column":16},"end":{"line":85,"column":100}},"52":{"start":{"line":87,"column":12},"end":{"line":87,"column":37}},"53":{"start":{"line":90,"column":12},"end":{"line":90,"column":88}},"54":{"start":{"line":94,"column":33},"end":{"line":94,"column":42}},"55":{"start":{"line":95,"column":8},"end":{"line":95,"column":61}},"56":{"start":{"line":96,"column":8},"end":{"line":96,"column":63}},"57":{"start":{"line":97,"column":8},"end":{"line":97,"column":65}},"58":{"start":{"line":98,"column":8},"end":{"line":98,"column":74}},"59":{"start":{"line":99,"column":8},"end":{"line":99,"column":66}},"60":{"start":{"line":100,"column":8},"end":{"line":100,"column":63}},"61":{"start":{"line":101,"column":8},"end":{"line":101,"column":61}},"62":{"start":{"line":102,"column":8},"end":{"line":102,"column":63}},"63":{"start":{"line":103,"column":8},"end":{"line":103,"column":63}},"64":{"start":{"line":104,"column":8},"end":{"line":104,"column":65}},"65":{"start":{"line":105,"column":8},"end":{"line":107,"column":9}},"66":{"start":{"line":106,"column":12},"end":{"line":106,"column":97}},"67":{"start":{"line":108,"column":8},"end":{"line":108,"column":45}},"68":{"start":{"line":111,"column":0},"end":{"line":111,"column":43}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":43},"end":{"line":37,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":52},"end":{"line":13,"column":53}},"loc":{"start":{"line":13,"column":62},"end":{"line":13,"column":107}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":56},"end":{"line":14,"column":57}},"loc":{"start":{"line":14,"column":72},"end":{"line":28,"column":9}},"line":14},"3":{"name":"(anonymous_3)","decl":{"start":{"line":21,"column":60},"end":{"line":21,"column":61}},"loc":{"start":{"line":21,"column":67},"end":{"line":21,"column":89}},"line":21},"4":{"name":"(anonymous_4)","decl":{"start":{"line":22,"column":65},"end":{"line":22,"column":66}},"loc":{"start":{"line":22,"column":72},"end":{"line":22,"column":87}},"line":22},"5":{"name":"(anonymous_5)","decl":{"start":{"line":31,"column":20},"end":{"line":31,"column":21}},"loc":{"start":{"line":31,"column":32},"end":{"line":31,"column":61}},"line":31},"6":{"name":"(anonymous_6)","decl":{"start":{"line":32,"column":21},"end":{"line":32,"column":22}},"loc":{"start":{"line":32,"column":33},"end":{"line":32,"column":45}},"line":32},"7":{"name":"(anonymous_7)","decl":{"start":{"line":51,"column":4},"end":{"line":51,"column":5}},"loc":{"start":{"line":51,"column":39},"end":{"line":66,"column":5}},"line":51},"8":{"name":"(anonymous_8)","decl":{"start":{"line":60,"column":61},"end":{"line":60,"column":62}},"loc":{"start":{"line":60,"column":81},"end":{"line":60,"column":116}},"line":60},"9":{"name":"(anonymous_9)","decl":{"start":{"line":67,"column":4},"end":{"line":67,"column":5}},"loc":{"start":{"line":67,"column":42},"end":{"line":92,"column":5}},"line":67},"10":{"name":"(anonymous_10)","decl":{"start":{"line":93,"column":4},"end":{"line":93,"column":5}},"loc":{"start":{"line":93,"column":40},"end":{"line":109,"column":5}},"line":93}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},{"start":{"line":9,"column":8},"end":{"line":11,"column":9}}],"line":9},"1":{"loc":{"start":{"line":13,"column":62},"end":{"line":13,"column":107}},"type":"binary-expr","locations":[{"start":{"line":13,"column":62},"end":{"line":13,"column":94}},{"start":{"line":13,"column":98},"end":{"line":13,"column":107}}],"line":13},"2":{"loc":{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},{"start":{"line":33,"column":8},"end":{"line":35,"column":9}}],"line":33},"3":{"loc":{"start":{"line":55,"column":12},"end":{"line":58,"column":13}},"type":"if","locations":[{"start":{"line":55,"column":12},"end":{"line":58,"column":13}},{"start":{"line":55,"column":12},"end":{"line":58,"column":13}}],"line":55},"4":{"loc":{"start":{"line":55,"column":16},"end":{"line":55,"column":70}},"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":34}},{"start":{"line":55,"column":38},"end":{"line":55,"column":70}}],"line":55},"5":{"loc":{"start":{"line":69,"column":8},"end":{"line":91,"column":9}},"type":"if","locations":[{"start":{"line":69,"column":8},"end":{"line":91,"column":9}},{"start":{"line":69,"column":8},"end":{"line":91,"column":9}}],"line":69},"6":{"loc":{"start":{"line":79,"column":13},"end":{"line":91,"column":9}},"type":"if","locations":[{"start":{"line":79,"column":13},"end":{"line":91,"column":9}},{"start":{"line":79,"column":13},"end":{"line":91,"column":9}}],"line":79},"7":{"loc":{"start":{"line":105,"column":8},"end":{"line":107,"column":9}},"type":"if","locations":[{"start":{"line":105,"column":8},"end":{"line":107,"column":9}},{"start":{"line":105,"column":8},"end":{"line":107,"column":9}}],"line":105}},"s":{"0":1,"1":1,"2":1,"3":36,"4":33,"5":33,"6":0,"7":33,"8":33,"9":6048,"10":33,"11":6013,"12":6013,"13":6013,"14":6008,"15":6008,"16":6008,"17":6008,"18":67851,"19":6008,"20":67851,"21":6008,"22":5,"23":33,"24":33,"25":6013,"26":6013,"27":33,"28":6,"29":27,"30":1,"31":67851,"32":67851,"33":67851,"34":67849,"35":25491,"36":25491,"37":67849,"38":67849,"39":678490,"40":67849,"41":2,"42":678490,"43":678490,"44":339245,"45":339245,"46":42358,"47":339245,"48":339245,"49":339245,"50":339245,"51":67849,"52":339245,"53":0,"54":678490,"55":678490,"56":678490,"57":678490,"58":678490,"59":678490,"60":678490,"61":678490,"62":678490,"63":678490,"64":678490,"65":678490,"66":0,"67":678490,"68":1},"f":{"0":36,"1":6048,"2":6013,"3":67851,"4":67851,"5":6013,"6":6013,"7":67851,"8":678490,"9":678490,"10":678490},"b":{"0":[0,33],"1":[6048,6046],"2":[6,27],"3":[25491,42358],"4":[67849,67849],"5":[339245,339245],"6":[339245,0],"7":[0,678490]},"inputSourceMap":{"version":3,"file":"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/SectionsDatasetProcessor.ts","sources":["/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/SectionsDatasetProcessor.ts"],"names":[],"mappings":"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","sourcesContent":["import { DatasetId, DatasetUtils, Section } from \"./Dataset\";\nimport { InsightError } from \"./IInsightFacade\";\nexport default class SectionsDatasetProcessor {\n\t/**\n\t *\n\t * @param content zip file\n\t * @returns Returns the valid sections from zip file\n\t */\n\tpublic static async getValidSections(content: string): Promise<Section[]> {\n\t\tconst unzipped = await DatasetUtils.unzipBase64Content(content);\n\n\t\t// Check if unzipped file has courses folder\n\t\tconst coursesFolder = unzipped.folder(\"courses\");\n\t\tif (coursesFolder === null) {\n\t\t\tthrow new InsightError(\"No courses folder!\");\n\t\t}\n\n\t\t// Go through files in courses folder\n\t\tconst courseFiles = Object.values(unzipped.files);\n\t\t// Filters for valid JSON files in courses folder\n\t\tconst validCourseFiles = courseFiles.filter((file) => file.name.startsWith(\"courses/\") && !file.dir);\n\t\t// Map over valid files to read content\n\t\tconst courseFilePromises = validCourseFiles.map(async (file) => {\n\t\t\tconst jsonContent = await file.async(\"string\");\n\t\t\ttry {\n\t\t\t\tconst parsedData = JSON.parse(jsonContent);\n\t\t\t\tconst parsedDataObject = DatasetUtils.checkIsObject(\"result\", parsedData);\n\t\t\t\tconst resultInMap = DatasetUtils.requireHasKeys(parsedDataObject, [[\"result\", true]]);\n\t\t\t\tconst arrayOfSectionLike = DatasetUtils.checkIsArray(\"section array\", resultInMap.get(\"result\"));\n\t\t\t\tconst sectionArray = arrayOfSectionLike.map((x) => this.checkIsSection(x));\n\t\t\t\tconst sectionFilteredArray = sectionArray.filter((x) => x !== undefined) as Section[];\n\n\t\t\t\treturn sectionFilteredArray; // Return the valid sections\n\t\t\t} catch (_e) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t});\n\t\t// Wait for all promises to fulfill or reject, filter results for fulfilled promises and flatten the section arrays\n\t\tconst courseSectionsArrays = await Promise.allSettled(courseFilePromises);\n\t\tconst sections = courseSectionsArrays\n\t\t\t.filter((result) => result.status === \"fulfilled\")\n\t\t\t.flatMap((result) => (result as PromiseFulfilledResult<Section[]>).value);\n\n\t\t// Check if there's at least one valid section\n\t\tif (sections.length === 0) {\n\t\t\tthrow new InsightError(\"No valid sections found in content!\");\n\t\t}\n\n\t\treturn sections;\n\t}\n\n\tprivate static sectionKeys: [string, boolean][] = [\n\t\t[\"id\", true],\n\t\t[\"Course\", true],\n\t\t[\"Title\", true],\n\t\t[\"Professor\", true],\n\t\t[\"Subject\", true],\n\t\t[\"Year\", true],\n\t\t[\"Avg\", true],\n\t\t[\"Pass\", true],\n\t\t[\"Fail\", true],\n\t\t[\"Audit\", true],\n\t\t[\"Section\", false],\n\t];\n\n\tpublic static checkIsSection(sectionLike: unknown): Section | undefined {\n\t\ttry {\n\t\t\tconst sectionLikeIsObject = DatasetUtils.checkIsObject(\"section\", sectionLike);\n\t\t\tconst map = DatasetUtils.requireHasKeys(sectionLikeIsObject, this.sectionKeys);\n\n\t\t\t// Check for overall secton\n\t\t\tif (map.has(\"Section\") && map.get(\"Section\") === \"overall\") {\n\t\t\t\tconst overallSectionYear = 1900;\n\t\t\t\tmap.set(\"Year\", overallSectionYear);\n\t\t\t}\n\t\t\tmap.delete(\"Section\");\n\n\t\t\tconst sectionKVP = Array.from(map.entries()).map(([fileKey, val]) => this.parseSectionKeys(fileKey, val));\n\n\t\t\treturn Object.fromEntries(sectionKVP) as unknown as Section;\n\t\t} catch (_e) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tprivate static parseSectionKeys(fileKey: string, val: unknown): [DatasetId, string | number] {\n\t\tconst dsetKey = this.mapFileToDatasetKey(fileKey);\n\t\tif (DatasetUtils.isMKey(dsetKey)) {\n\t\t\tlet numVal: number;\n\t\t\ttry {\n\t\t\t\tnumVal = DatasetUtils.checkIsNumber(\"section \" + dsetKey, val);\n\t\t\t} catch (_e) {\n\t\t\t\tnumVal = Number.parseInt(DatasetUtils.checkIsString(\"section \" + dsetKey, val), 10);\n\t\t\t}\n\t\t\treturn [dsetKey, numVal];\n\t\t} else if (DatasetUtils.isSKey(dsetKey)) {\n\t\t\tlet strVal: string;\n\t\t\ttry {\n\t\t\t\tstrVal = DatasetUtils.checkIsString(\"section \" + dsetKey, val);\n\t\t\t} catch (_e) {\n\t\t\t\tstrVal = DatasetUtils.checkIsNumber(\"section \" + dsetKey, val).toString();\n\t\t\t}\n\t\t\treturn [dsetKey, strVal];\n\t\t} else {\n\t\t\tthrow new InsightError(\"Key value not a number or string\");\n\t\t}\n\t}\n\n\tprivate static mapFileToDatasetKey(fileKey: string): DatasetId {\n\t\tconst fileToDatasetMap = new Map<string, DatasetId>();\n\t\tfileToDatasetMap.set(\"id\", DatasetId.Uuid);\n\t\tfileToDatasetMap.set(\"Course\", DatasetId.Id);\n\t\tfileToDatasetMap.set(\"Title\", DatasetId.Title);\n\t\tfileToDatasetMap.set(\"Professor\", DatasetId.Instructor);\n\t\tfileToDatasetMap.set(\"Subject\", DatasetId.Dept);\n\t\tfileToDatasetMap.set(\"Year\", DatasetId.Year);\n\t\tfileToDatasetMap.set(\"Avg\", DatasetId.Avg);\n\t\tfileToDatasetMap.set(\"Pass\", DatasetId.Pass);\n\t\tfileToDatasetMap.set(\"Fail\", DatasetId.Fail);\n\t\tfileToDatasetMap.set(\"Audit\", DatasetId.Audit);\n\t\tif (!fileToDatasetMap.has(fileKey)) {\n\t\t\tthrow new InsightError(\"File key does not correspond to DatasetId\");\n\t\t}\n\t\treturn fileToDatasetMap.get(fileKey)!!;\n\t}\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2510d1670bf8a822b7abda47203738e052123834","contentHash":"dd38c35b3ee992b323b184adcac5b4bbe4da76b9ccd6807ec6be403e43665198"},"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/RoomsDatasetProcessor.ts":{"path":"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/RoomsDatasetProcessor.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":0},"end":{"line":25,"column":62}},"25":{"start":{"line":26,"column":0},"end":{"line":26,"column":39}},"26":{"start":{"line":27,"column":17},"end":{"line":27,"column":34}},"27":{"start":{"line":28,"column":18},"end":{"line":28,"column":38}},"28":{"start":{"line":29,"column":25},"end":{"line":29,"column":52}},"29":{"start":{"line":30,"column":13},"end":{"line":30,"column":47}},"30":{"start":{"line":31,"column":26},"end":{"line":31,"column":37}},"31":{"start":{"line":34,"column":25},"end":{"line":34,"column":81}},"32":{"start":{"line":35,"column":26},"end":{"line":35,"column":58}},"33":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"34":{"start":{"line":37,"column":12},"end":{"line":37,"column":74}},"35":{"start":{"line":39,"column":33},"end":{"line":39,"column":64}},"36":{"start":{"line":40,"column":30},"end":{"line":40,"column":67}},"37":{"start":{"line":41,"column":27},"end":{"line":41,"column":61}},"38":{"start":{"line":42,"column":31},"end":{"line":42,"column":63}},"39":{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},"40":{"start":{"line":44,"column":12},"end":{"line":44,"column":71}},"41":{"start":{"line":46,"column":32},"end":{"line":46,"column":74}},"42":{"start":{"line":47,"column":25},"end":{"line":47,"column":78}},"43":{"start":{"line":48,"column":8},"end":{"line":48,"column":24}},"44":{"start":{"line":51,"column":22},"end":{"line":53,"column":81}},"45":{"start":{"line":52,"column":27},"end":{"line":52,"column":88}},"46":{"start":{"line":53,"column":31},"end":{"line":53,"column":78}},"47":{"start":{"line":54,"column":32},"end":{"line":68,"column":11}},"48":{"start":{"line":55,"column":38},"end":{"line":55,"column":68}},"49":{"start":{"line":56,"column":33},"end":{"line":59,"column":62}},"50":{"start":{"line":59,"column":39},"end":{"line":59,"column":61}},"51":{"start":{"line":60,"column":12},"end":{"line":62,"column":13}},"52":{"start":{"line":61,"column":16},"end":{"line":61,"column":26}},"53":{"start":{"line":63,"column":33},"end":{"line":63,"column":72}},"54":{"start":{"line":64,"column":12},"end":{"line":66,"column":13}},"55":{"start":{"line":65,"column":16},"end":{"line":65,"column":26}},"56":{"start":{"line":67,"column":12},"end":{"line":67,"column":77}},"57":{"start":{"line":69,"column":8},"end":{"line":69,"column":38}},"58":{"start":{"line":72,"column":20},"end":{"line":72,"column":29}},"59":{"start":{"line":73,"column":8},"end":{"line":88,"column":9}},"60":{"start":{"line":74,"column":37},"end":{"line":86,"column":13}},"61":{"start":{"line":75,"column":44},"end":{"line":75,"column":86}},"62":{"start":{"line":76,"column":16},"end":{"line":78,"column":17}},"63":{"start":{"line":77,"column":20},"end":{"line":77,"column":37}},"64":{"start":{"line":79,"column":16},"end":{"line":85,"column":18}},"65":{"start":{"line":87,"column":12},"end":{"line":87,"column":54}},"66":{"start":{"line":89,"column":8},"end":{"line":89,"column":19}},"67":{"start":{"line":93,"column":8},"end":{"line":98,"column":9}},"68":{"start":{"line":94,"column":12},"end":{"line":94,"column":54}},"69":{"start":{"line":97,"column":12},"end":{"line":97,"column":22}},"70":{"start":{"line":99,"column":22},"end":{"line":99,"column":24}},"71":{"start":{"line":100,"column":8},"end":{"line":109,"column":11}},"72":{"start":{"line":101,"column":12},"end":{"line":108,"column":13}},"73":{"start":{"line":102,"column":29},"end":{"line":102,"column":77}},"74":{"start":{"line":103,"column":16},"end":{"line":105,"column":17}},"75":{"start":{"line":104,"column":20},"end":{"line":104,"column":37}},"76":{"start":{"line":110,"column":8},"end":{"line":110,"column":21}},"77":{"start":{"line":118,"column":8},"end":{"line":136,"column":9}},"78":{"start":{"line":119,"column":12},"end":{"line":135,"column":13}},"79":{"start":{"line":120,"column":16},"end":{"line":134,"column":17}},"80":{"start":{"line":121,"column":20},"end":{"line":121,"column":77}},"81":{"start":{"line":123,"column":21},"end":{"line":134,"column":17}},"82":{"start":{"line":124,"column":20},"end":{"line":124,"column":60}},"83":{"start":{"line":126,"column":21},"end":{"line":134,"column":17}},"84":{"start":{"line":127,"column":20},"end":{"line":127,"column":55}},"85":{"start":{"line":129,"column":21},"end":{"line":134,"column":17}},"86":{"start":{"line":130,"column":20},"end":{"line":130,"column":86}},"87":{"start":{"line":132,"column":21},"end":{"line":134,"column":17}},"88":{"start":{"line":133,"column":20},"end":{"line":133,"column":92}},"89":{"start":{"line":137,"column":8},"end":{"line":149,"column":10}},"90":{"start":{"line":152,"column":8},"end":{"line":156,"column":11}},"91":{"start":{"line":153,"column":12},"end":{"line":155,"column":13}},"92":{"start":{"line":154,"column":16},"end":{"line":154,"column":30}},"93":{"start":{"line":159,"column":8},"end":{"line":159,"column":58}},"94":{"start":{"line":159,"column":37},"end":{"line":159,"column":56}},"95":{"start":{"line":162,"column":8},"end":{"line":162,"column":61}},"96":{"start":{"line":162,"column":40},"end":{"line":162,"column":59}},"97":{"start":{"line":165,"column":25},"end":{"line":165,"column":74}},"98":{"start":{"line":165,"column":51},"end":{"line":165,"column":73}},"99":{"start":{"line":166,"column":8},"end":{"line":166,"column":31}},"100":{"start":{"line":169,"column":8},"end":{"line":169,"column":45}},"101":{"start":{"line":172,"column":8},"end":{"line":174,"column":9}},"102":{"start":{"line":173,"column":12},"end":{"line":173,"column":25}},"103":{"start":{"line":175,"column":23},"end":{"line":175,"column":39}},"104":{"start":{"line":176,"column":8},"end":{"line":176,"column":62}},"105":{"start":{"line":179,"column":23},"end":{"line":179,"column":39}},"106":{"start":{"line":180,"column":8},"end":{"line":182,"column":9}},"107":{"start":{"line":181,"column":12},"end":{"line":181,"column":25}},"108":{"start":{"line":183,"column":8},"end":{"line":183,"column":110}},"109":{"start":{"line":183,"column":37},"end":{"line":183,"column":65}},"110":{"start":{"line":183,"column":90},"end":{"line":183,"column":102}},"111":{"start":{"line":186,"column":8},"end":{"line":198,"column":28}},"112":{"start":{"line":188,"column":32},"end":{"line":188,"column":45}},"113":{"start":{"line":189,"column":12},"end":{"line":191,"column":13}},"114":{"start":{"line":190,"column":16},"end":{"line":190,"column":33}},"115":{"start":{"line":192,"column":12},"end":{"line":192,"column":31}},"116":{"start":{"line":194,"column":31},"end":{"line":194,"column":50}},"117":{"start":{"line":195,"column":31},"end":{"line":195,"column":55}},"118":{"start":{"line":196,"column":30},"end":{"line":196,"column":57}},"119":{"start":{"line":197,"column":27},"end":{"line":197,"column":42}},"120":{"start":{"line":198,"column":24},"end":{"line":198,"column":25}},"121":{"start":{"line":204,"column":8},"end":{"line":216,"column":9}},"122":{"start":{"line":205,"column":12},"end":{"line":215,"column":13}},"123":{"start":{"line":206,"column":16},"end":{"line":214,"column":17}},"124":{"start":{"line":207,"column":20},"end":{"line":207,"column":93}},"125":{"start":{"line":209,"column":21},"end":{"line":214,"column":17}},"126":{"start":{"line":210,"column":20},"end":{"line":210,"column":70}},"127":{"start":{"line":212,"column":21},"end":{"line":214,"column":17}},"128":{"start":{"line":213,"column":20},"end":{"line":213,"column":67}},"129":{"start":{"line":217,"column":8},"end":{"line":223,"column":9}},"130":{"start":{"line":217,"column":61},"end":{"line":217,"column":76}},"131":{"start":{"line":218,"column":12},"end":{"line":222,"column":14}},"132":{"start":{"line":224,"column":8},"end":{"line":224,"column":25}},"133":{"start":{"line":227,"column":8},"end":{"line":232,"column":9}},"134":{"start":{"line":228,"column":24},"end":{"line":228,"column":59}},"135":{"start":{"line":229,"column":12},"end":{"line":231,"column":13}},"136":{"start":{"line":230,"column":16},"end":{"line":230,"column":27}},"137":{"start":{"line":233,"column":8},"end":{"line":233,"column":78}},"138":{"start":{"line":236,"column":8},"end":{"line":244,"column":9}},"139":{"start":{"line":237,"column":12},"end":{"line":243,"column":13}},"140":{"start":{"line":238,"column":16},"end":{"line":242,"column":17}},"141":{"start":{"line":239,"column":57},"end":{"line":240,"column":113}},"142":{"start":{"line":240,"column":53},"end":{"line":240,"column":112}},"143":{"start":{"line":241,"column":20},"end":{"line":241,"column":33}},"144":{"start":{"line":245,"column":25},"end":{"line":245,"column":41}},"145":{"start":{"line":246,"column":8},"end":{"line":253,"column":9}},"146":{"start":{"line":247,"column":12},"end":{"line":252,"column":13}},"147":{"start":{"line":248,"column":28},"end":{"line":248,"column":89}},"148":{"start":{"line":249,"column":16},"end":{"line":251,"column":17}},"149":{"start":{"line":250,"column":20},"end":{"line":250,"column":31}},"150":{"start":{"line":254,"column":8},"end":{"line":254,"column":25}},"151":{"start":{"line":257,"column":31},"end":{"line":257,"column":58}},"152":{"start":{"line":258,"column":20},"end":{"line":258,"column":100}},"153":{"start":{"line":259,"column":25},"end":{"line":264,"column":13}},"154":{"start":{"line":259,"column":44},"end":{"line":264,"column":10}},"155":{"start":{"line":260,"column":24},"end":{"line":260,"column":37}},"156":{"start":{"line":261,"column":12},"end":{"line":261,"column":54}},"157":{"start":{"line":261,"column":40},"end":{"line":261,"column":52}},"158":{"start":{"line":262,"column":12},"end":{"line":262,"column":50}},"159":{"start":{"line":262,"column":37},"end":{"line":262,"column":48}},"160":{"start":{"line":263,"column":12},"end":{"line":263,"column":22}},"161":{"start":{"line":265,"column":19},"end":{"line":265,"column":21}},"162":{"start":{"line":266,"column":8},"end":{"line":268,"column":9}},"163":{"start":{"line":267,"column":12},"end":{"line":267,"column":26}},"164":{"start":{"line":269,"column":8},"end":{"line":269,"column":32}},"165":{"start":{"line":272,"column":0},"end":{"line":272,"column":54}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":33,"column":4},"end":{"line":33,"column":5}},"loc":{"start":{"line":33,"column":40},"end":{"line":49,"column":5}},"line":33},"7":{"name":"(anonymous_7)","decl":{"start":{"line":50,"column":4},"end":{"line":50,"column":5}},"loc":{"start":{"line":50,"column":60},"end":{"line":70,"column":5}},"line":50},"8":{"name":"(anonymous_8)","decl":{"start":{"line":52,"column":20},"end":{"line":52,"column":21}},"loc":{"start":{"line":52,"column":27},"end":{"line":52,"column":88}},"line":52},"9":{"name":"(anonymous_9)","decl":{"start":{"line":53,"column":17},"end":{"line":53,"column":18}},"loc":{"start":{"line":53,"column":31},"end":{"line":53,"column":78}},"line":53},"10":{"name":"(anonymous_10)","decl":{"start":{"line":54,"column":60},"end":{"line":54,"column":61}},"loc":{"start":{"line":54,"column":76},"end":{"line":68,"column":9}},"line":54},"11":{"name":"(anonymous_11)","decl":{"start":{"line":59,"column":22},"end":{"line":59,"column":23}},"loc":{"start":{"line":59,"column":39},"end":{"line":59,"column":61}},"line":59},"12":{"name":"(anonymous_12)","decl":{"start":{"line":71,"column":4},"end":{"line":71,"column":5}},"loc":{"start":{"line":71,"column":44},"end":{"line":90,"column":5}},"line":71},"13":{"name":"(anonymous_13)","decl":{"start":{"line":74,"column":37},"end":{"line":74,"column":38}},"loc":{"start":{"line":74,"column":49},"end":{"line":86,"column":13}},"line":74},"14":{"name":"(anonymous_14)","decl":{"start":{"line":91,"column":4},"end":{"line":91,"column":5}},"loc":{"start":{"line":91,"column":54},"end":{"line":111,"column":5}},"line":91},"15":{"name":"(anonymous_15)","decl":{"start":{"line":100,"column":49},"end":{"line":100,"column":50}},"loc":{"start":{"line":100,"column":57},"end":{"line":109,"column":9}},"line":100},"16":{"name":"(anonymous_16)","decl":{"start":{"line":112,"column":4},"end":{"line":112,"column":5}},"loc":{"start":{"line":112,"column":55},"end":{"line":150,"column":5}},"line":112},"17":{"name":"(anonymous_17)","decl":{"start":{"line":151,"column":4},"end":{"line":151,"column":5}},"loc":{"start":{"line":151,"column":47},"end":{"line":157,"column":5}},"line":151},"18":{"name":"(anonymous_18)","decl":{"start":{"line":152,"column":36},"end":{"line":152,"column":37}},"loc":{"start":{"line":152,"column":51},"end":{"line":156,"column":9}},"line":152},"19":{"name":"(anonymous_19)","decl":{"start":{"line":158,"column":4},"end":{"line":158,"column":5}},"loc":{"start":{"line":158,"column":37},"end":{"line":160,"column":5}},"line":158},"20":{"name":"(anonymous_20)","decl":{"start":{"line":159,"column":30},"end":{"line":159,"column":31}},"loc":{"start":{"line":159,"column":37},"end":{"line":159,"column":56}},"line":159},"21":{"name":"(anonymous_21)","decl":{"start":{"line":161,"column":4},"end":{"line":161,"column":5}},"loc":{"start":{"line":161,"column":34},"end":{"line":163,"column":5}},"line":161},"22":{"name":"(anonymous_22)","decl":{"start":{"line":162,"column":33},"end":{"line":162,"column":34}},"loc":{"start":{"line":162,"column":40},"end":{"line":162,"column":59}},"line":162},"23":{"name":"(anonymous_23)","decl":{"start":{"line":164,"column":4},"end":{"line":164,"column":5}},"loc":{"start":{"line":164,"column":30},"end":{"line":167,"column":5}},"line":164},"24":{"name":"(anonymous_24)","decl":{"start":{"line":165,"column":44},"end":{"line":165,"column":45}},"loc":{"start":{"line":165,"column":51},"end":{"line":165,"column":73}},"line":165},"25":{"name":"(anonymous_25)","decl":{"start":{"line":168,"column":4},"end":{"line":168,"column":5}},"loc":{"start":{"line":168,"column":23},"end":{"line":170,"column":5}},"line":168},"26":{"name":"(anonymous_26)","decl":{"start":{"line":171,"column":4},"end":{"line":171,"column":5}},"loc":{"start":{"line":171,"column":32},"end":{"line":177,"column":5}},"line":171},"27":{"name":"(anonymous_27)","decl":{"start":{"line":178,"column":4},"end":{"line":178,"column":5}},"loc":{"start":{"line":178,"column":39},"end":{"line":184,"column":5}},"line":178},"28":{"name":"(anonymous_28)","decl":{"start":{"line":183,"column":26},"end":{"line":183,"column":27}},"loc":{"start":{"line":183,"column":37},"end":{"line":183,"column":65}},"line":183},"29":{"name":"(anonymous_29)","decl":{"start":{"line":183,"column":74},"end":{"line":183,"column":75}},"loc":{"start":{"line":183,"column":90},"end":{"line":183,"column":102}},"line":183},"30":{"name":"(anonymous_30)","decl":{"start":{"line":185,"column":4},"end":{"line":185,"column":5}},"loc":{"start":{"line":185,"column":39},"end":{"line":199,"column":5}},"line":185},"31":{"name":"(anonymous_31)","decl":{"start":{"line":187,"column":17},"end":{"line":187,"column":18}},"loc":{"start":{"line":187,"column":36},"end":{"line":193,"column":9}},"line":187},"32":{"name":"(anonymous_32)","decl":{"start":{"line":194,"column":20},"end":{"line":194,"column":21}},"loc":{"start":{"line":194,"column":31},"end":{"line":194,"column":50}},"line":194},"33":{"name":"(anonymous_33)","decl":{"start":{"line":195,"column":20},"end":{"line":195,"column":21}},"loc":{"start":{"line":195,"column":31},"end":{"line":195,"column":55}},"line":195},"34":{"name":"(anonymous_34)","decl":{"start":{"line":196,"column":17},"end":{"line":196,"column":18}},"loc":{"start":{"line":196,"column":30},"end":{"line":196,"column":57}},"line":196},"35":{"name":"(anonymous_35)","decl":{"start":{"line":197,"column":20},"end":{"line":197,"column":21}},"loc":{"start":{"line":197,"column":27},"end":{"line":197,"column":42}},"line":197},"36":{"name":"(anonymous_36)","decl":{"start":{"line":198,"column":17},"end":{"line":198,"column":18}},"loc":{"start":{"line":198,"column":24},"end":{"line":198,"column":25}},"line":198},"37":{"name":"(anonymous_37)","decl":{"start":{"line":200,"column":4},"end":{"line":200,"column":5}},"loc":{"start":{"line":200,"column":29},"end":{"line":225,"column":5}},"line":200},"38":{"name":"(anonymous_38)","decl":{"start":{"line":217,"column":54},"end":{"line":217,"column":55}},"loc":{"start":{"line":217,"column":61},"end":{"line":217,"column":76}},"line":217},"39":{"name":"(anonymous_39)","decl":{"start":{"line":226,"column":4},"end":{"line":226,"column":5}},"loc":{"start":{"line":226,"column":36},"end":{"line":234,"column":5}},"line":226},"40":{"name":"(anonymous_40)","decl":{"start":{"line":235,"column":4},"end":{"line":235,"column":5}},"loc":{"start":{"line":235,"column":46},"end":{"line":255,"column":5}},"line":235},"41":{"name":"(anonymous_41)","decl":{"start":{"line":239,"column":44},"end":{"line":239,"column":45}},"loc":{"start":{"line":239,"column":57},"end":{"line":240,"column":113}},"line":239},"42":{"name":"(anonymous_42)","decl":{"start":{"line":240,"column":43},"end":{"line":240,"column":44}},"loc":{"start":{"line":240,"column":53},"end":{"line":240,"column":112}},"line":240},"43":{"name":"(anonymous_43)","decl":{"start":{"line":256,"column":4},"end":{"line":256,"column":5}},"loc":{"start":{"line":256,"column":41},"end":{"line":270,"column":5}},"line":256},"44":{"name":"(anonymous_44)","decl":{"start":{"line":259,"column":32},"end":{"line":259,"column":33}},"loc":{"start":{"line":259,"column":44},"end":{"line":264,"column":10}},"line":259},"45":{"name":"(anonymous_45)","decl":{"start":{"line":259,"column":56},"end":{"line":259,"column":57}},"loc":{"start":{"line":259,"column":77},"end":{"line":264,"column":9}},"line":259},"46":{"name":"(anonymous_46)","decl":{"start":{"line":261,"column":31},"end":{"line":261,"column":32}},"loc":{"start":{"line":261,"column":40},"end":{"line":261,"column":52}},"line":261},"47":{"name":"(anonymous_47)","decl":{"start":{"line":262,"column":28},"end":{"line":262,"column":29}},"loc":{"start":{"line":262,"column":37},"end":{"line":262,"column":48}},"line":262}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"type":"if","locations":[{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},{"start":{"line":36,"column":8},"end":{"line":38,"column":9}}],"line":36},"17":{"loc":{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},{"start":{"line":43,"column":8},"end":{"line":45,"column":9}}],"line":43},"18":{"loc":{"start":{"line":60,"column":12},"end":{"line":62,"column":13}},"type":"if","locations":[{"start":{"line":60,"column":12},"end":{"line":62,"column":13}},{"start":{"line":60,"column":12},"end":{"line":62,"column":13}}],"line":60},"19":{"loc":{"start":{"line":64,"column":12},"end":{"line":66,"column":13}},"type":"if","locations":[{"start":{"line":64,"column":12},"end":{"line":66,"column":13}},{"start":{"line":64,"column":12},"end":{"line":66,"column":13}}],"line":64},"20":{"loc":{"start":{"line":76,"column":16},"end":{"line":78,"column":17}},"type":"if","locations":[{"start":{"line":76,"column":16},"end":{"line":78,"column":17}},{"start":{"line":76,"column":16},"end":{"line":78,"column":17}}],"line":76},"21":{"loc":{"start":{"line":76,"column":20},"end":{"line":76,"column":81}},"type":"binary-expr","locations":[{"start":{"line":76,"column":20},"end":{"line":76,"column":39}},{"start":{"line":76,"column":43},"end":{"line":76,"column":60}},{"start":{"line":76,"column":64},"end":{"line":76,"column":81}}],"line":76},"22":{"loc":{"start":{"line":103,"column":16},"end":{"line":105,"column":17}},"type":"if","locations":[{"start":{"line":103,"column":16},"end":{"line":105,"column":17}},{"start":{"line":103,"column":16},"end":{"line":105,"column":17}}],"line":103},"23":{"loc":{"start":{"line":119,"column":12},"end":{"line":135,"column":13}},"type":"if","locations":[{"start":{"line":119,"column":12},"end":{"line":135,"column":13}},{"start":{"line":119,"column":12},"end":{"line":135,"column":13}}],"line":119},"24":{"loc":{"start":{"line":120,"column":16},"end":{"line":134,"column":17}},"type":"if","locations":[{"start":{"line":120,"column":16},"end":{"line":134,"column":17}},{"start":{"line":120,"column":16},"end":{"line":134,"column":17}}],"line":120},"25":{"loc":{"start":{"line":121,"column":37},"end":{"line":121,"column":71}},"type":"binary-expr","locations":[{"start":{"line":121,"column":37},"end":{"line":121,"column":64}},{"start":{"line":121,"column":68},"end":{"line":121,"column":71}}],"line":121},"26":{"loc":{"start":{"line":123,"column":21},"end":{"line":134,"column":17}},"type":"if","locations":[{"start":{"line":123,"column":21},"end":{"line":134,"column":17}},{"start":{"line":123,"column":21},"end":{"line":134,"column":17}}],"line":123},"27":{"loc":{"start":{"line":126,"column":21},"end":{"line":134,"column":17}},"type":"if","locations":[{"start":{"line":126,"column":21},"end":{"line":134,"column":17}},{"start":{"line":126,"column":21},"end":{"line":134,"column":17}}],"line":126},"28":{"loc":{"start":{"line":129,"column":21},"end":{"line":134,"column":17}},"type":"if","locations":[{"start":{"line":129,"column":21},"end":{"line":134,"column":17}},{"start":{"line":129,"column":21},"end":{"line":134,"column":17}}],"line":129},"29":{"loc":{"start":{"line":132,"column":21},"end":{"line":134,"column":17}},"type":"if","locations":[{"start":{"line":132,"column":21},"end":{"line":134,"column":17}},{"start":{"line":132,"column":21},"end":{"line":134,"column":17}}],"line":132},"30":{"loc":{"start":{"line":153,"column":12},"end":{"line":155,"column":13}},"type":"if","locations":[{"start":{"line":153,"column":12},"end":{"line":155,"column":13}},{"start":{"line":153,"column":12},"end":{"line":155,"column":13}}],"line":153},"31":{"loc":{"start":{"line":172,"column":8},"end":{"line":174,"column":9}},"type":"if","locations":[{"start":{"line":172,"column":8},"end":{"line":174,"column":9}},{"start":{"line":172,"column":8},"end":{"line":174,"column":9}}],"line":172},"32":{"loc":{"start":{"line":172,"column":12},"end":{"line":172,"column":50}},"type":"binary-expr","locations":[{"start":{"line":172,"column":12},"end":{"line":172,"column":27}},{"start":{"line":172,"column":31},"end":{"line":172,"column":50}}],"line":172},"33":{"loc":{"start":{"line":180,"column":8},"end":{"line":182,"column":9}},"type":"if","locations":[{"start":{"line":180,"column":8},"end":{"line":182,"column":9}},{"start":{"line":180,"column":8},"end":{"line":182,"column":9}}],"line":180},"34":{"loc":{"start":{"line":183,"column":90},"end":{"line":183,"column":102}},"type":"binary-expr","locations":[{"start":{"line":183,"column":90},"end":{"line":183,"column":94}},{"start":{"line":183,"column":98},"end":{"line":183,"column":102}}],"line":183},"35":{"loc":{"start":{"line":189,"column":12},"end":{"line":191,"column":13}},"type":"if","locations":[{"start":{"line":189,"column":12},"end":{"line":191,"column":13}},{"start":{"line":189,"column":12},"end":{"line":191,"column":13}}],"line":189},"36":{"loc":{"start":{"line":205,"column":12},"end":{"line":215,"column":13}},"type":"if","locations":[{"start":{"line":205,"column":12},"end":{"line":215,"column":13}},{"start":{"line":205,"column":12},"end":{"line":215,"column":13}}],"line":205},"37":{"loc":{"start":{"line":206,"column":16},"end":{"line":214,"column":17}},"type":"if","locations":[{"start":{"line":206,"column":16},"end":{"line":214,"column":17}},{"start":{"line":206,"column":16},"end":{"line":214,"column":17}}],"line":206},"38":{"loc":{"start":{"line":209,"column":21},"end":{"line":214,"column":17}},"type":"if","locations":[{"start":{"line":209,"column":21},"end":{"line":214,"column":17}},{"start":{"line":209,"column":21},"end":{"line":214,"column":17}}],"line":209},"39":{"loc":{"start":{"line":212,"column":21},"end":{"line":214,"column":17}},"type":"if","locations":[{"start":{"line":212,"column":21},"end":{"line":214,"column":17}},{"start":{"line":212,"column":21},"end":{"line":214,"column":17}}],"line":212},"40":{"loc":{"start":{"line":217,"column":8},"end":{"line":223,"column":9}},"type":"if","locations":[{"start":{"line":217,"column":8},"end":{"line":223,"column":9}},{"start":{"line":217,"column":8},"end":{"line":223,"column":9}}],"line":217},"41":{"loc":{"start":{"line":229,"column":12},"end":{"line":231,"column":13}},"type":"if","locations":[{"start":{"line":229,"column":12},"end":{"line":231,"column":13}},{"start":{"line":229,"column":12},"end":{"line":231,"column":13}}],"line":229},"42":{"loc":{"start":{"line":236,"column":8},"end":{"line":244,"column":9}},"type":"if","locations":[{"start":{"line":236,"column":8},"end":{"line":244,"column":9}},{"start":{"line":236,"column":8},"end":{"line":244,"column":9}}],"line":236},"43":{"loc":{"start":{"line":236,"column":12},"end":{"line":236,"column":117}},"type":"binary-expr","locations":[{"start":{"line":236,"column":12},"end":{"line":236,"column":21}},{"start":{"line":236,"column":25},"end":{"line":236,"column":51}},{"start":{"line":236,"column":55},"end":{"line":236,"column":86}},{"start":{"line":236,"column":90},"end":{"line":236,"column":117}}],"line":236},"44":{"loc":{"start":{"line":238,"column":16},"end":{"line":242,"column":17}},"type":"if","locations":[{"start":{"line":238,"column":16},"end":{"line":242,"column":17}},{"start":{"line":238,"column":16},"end":{"line":242,"column":17}}],"line":238},"45":{"loc":{"start":{"line":238,"column":20},"end":{"line":240,"column":114}},"type":"binary-expr","locations":[{"start":{"line":238,"column":20},"end":{"line":238,"column":45}},{"start":{"line":239,"column":20},"end":{"line":240,"column":114}}],"line":238},"46":{"loc":{"start":{"line":239,"column":57},"end":{"line":240,"column":113}},"type":"binary-expr","locations":[{"start":{"line":239,"column":57},"end":{"line":239,"column":82}},{"start":{"line":240,"column":24},"end":{"line":240,"column":113}}],"line":239},"47":{"loc":{"start":{"line":240,"column":53},"end":{"line":240,"column":112}},"type":"binary-expr","locations":[{"start":{"line":240,"column":53},"end":{"line":240,"column":74}},{"start":{"line":240,"column":78},"end":{"line":240,"column":112}}],"line":240},"48":{"loc":{"start":{"line":246,"column":8},"end":{"line":253,"column":9}},"type":"if","locations":[{"start":{"line":246,"column":8},"end":{"line":253,"column":9}},{"start":{"line":246,"column":8},"end":{"line":253,"column":9}}],"line":246},"49":{"loc":{"start":{"line":248,"column":53},"end":{"line":248,"column":88}},"type":"binary-expr","locations":[{"start":{"line":248,"column":53},"end":{"line":248,"column":62}},{"start":{"line":248,"column":66},"end":{"line":248,"column":88}}],"line":248},"50":{"loc":{"start":{"line":249,"column":16},"end":{"line":251,"column":17}},"type":"if","locations":[{"start":{"line":249,"column":16},"end":{"line":251,"column":17}},{"start":{"line":249,"column":16},"end":{"line":251,"column":17}}],"line":249}},"s":{"0":1,"1":17,"2":17,"3":17,"4":17,"5":17,"6":149,"7":17,"8":0,"9":0,"10":0,"11":1,"12":1,"13":0,"14":1,"15":1,"16":0,"17":1,"18":1,"19":1,"20":17,"21":17,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":2,"32":2,"33":2,"34":0,"35":2,"36":2,"37":2,"38":2,"39":2,"40":0,"41":2,"42":2,"43":2,"44":2,"45":162,"46":154,"47":2,"48":154,"49":154,"50":616,"51":154,"52":6,"53":148,"54":148,"55":0,"56":148,"57":2,"58":2,"59":2,"60":148,"61":148,"62":148,"63":0,"64":148,"65":148,"66":2,"67":148,"68":148,"69":60,"70":88,"71":88,"72":728,"73":728,"74":728,"75":728,"76":88,"77":728,"78":8008,"79":3640,"80":728,"81":2912,"82":728,"83":2184,"84":728,"85":1456,"86":728,"87":728,"88":728,"89":728,"90":88,"91":1544,"92":728,"93":17804,"94":17804,"95":1604,"96":3208,"97":3356,"98":3356,"99":3356,"100":17076,"101":9636,"102":5256,"103":4380,"104":4380,"105":12696,"106":12696,"107":0,"108":12696,"109":12696,"110":12696,"111":2,"112":298,"113":298,"114":150,"115":148,"116":298,"117":148,"118":148,"119":148,"120":148,"121":148,"122":1628,"123":740,"124":148,"125":592,"126":148,"127":444,"128":148,"129":148,"130":444,"131":148,"132":0,"133":150,"134":1050,"135":1050,"136":90,"137":60,"138":193906,"139":90,"140":180,"141":180,"142":90,"143":90,"144":193816,"145":193816,"146":99348,"147":192856,"148":192856,"149":986,"150":192830,"151":149,"152":149,"153":149,"154":149,"155":149,"156":149,"157":149,"158":149,"159":0,"160":149,"161":149,"162":149,"163":149,"164":149,"165":1},"f":{"0":17,"1":149,"2":0,"3":1,"4":0,"5":1,"6":2,"7":2,"8":162,"9":154,"10":154,"11":616,"12":2,"13":148,"14":148,"15":728,"16":728,"17":88,"18":1544,"19":17804,"20":17804,"21":1604,"22":3208,"23":3356,"24":3356,"25":17076,"26":9636,"27":12696,"28":12696,"29":12696,"30":2,"31":298,"32":298,"33":148,"34":148,"35":148,"36":148,"37":148,"38":444,"39":150,"40":193906,"41":180,"42":90,"43":149,"44":149,"45":149,"46":149,"47":0},"b":{"0":[1,1,1],"1":[1,0],"2":[17,0],"3":[17,0],"4":[17,17],"5":[2,15],"6":[15,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[0,1],"12":[1,1],"13":[1,0],"14":[17,0],"15":[17,17],"16":[0,2],"17":[0,2],"18":[6,148],"19":[0,148],"20":[0,148],"21":[148,148,148],"22":[728,0],"23":[3640,4368],"24":[728,2912],"25":[728,0],"26":[728,2184],"27":[728,1456],"28":[728,728],"29":[728,0],"30":[728,816],"31":[5256,4380],"32":[9636,9636],"33":[0,12696],"34":[12696,12696],"35":[150,148],"36":[740,888],"37":[148,592],"38":[148,444],"39":[148,296],"40":[148,0],"41":[90,960],"42":[90,193816],"43":[193906,2160,90,90],"44":[90,90],"45":[180,90],"46":[180,90],"47":[90,90],"48":[99348,94468],"49":[192856,190786],"50":[986,191870]},"inputSourceMap":{"version":3,"file":"/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/RoomsDatasetProcessor.ts","sources":["/Users/fegicochen/Courses/CPSC 310/C1/project_team085/src/controller/RoomsDatasetProcessor.ts"],"names":[],"mappings":"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","sourcesContent":["import { parse } from \"parse5\";\nimport {\n\tDocument as ParseDoc,\n\tChildNode as ParseChildNode,\n\tElement,\n\tTextNode,\n} from \"parse5/dist/tree-adapters/default\";\nimport { DatasetUtils, Room } from \"./Dataset\";\nimport { InsightError } from \"./IInsightFacade\";\nimport JSZip from \"jszip\";\nimport * as http from \"node:http\";\nimport { Attribute } from \"parse5/dist/common/token\";\n\nconst roomsHtmlFileName = \"index.htm\";\n\ninterface BuildingInfo {\n\ttitle: string;\n\tcode: string;\n\taddress: string;\n\tlat: number;\n\tlon: number;\n}\n\ntype BuildingInfoMap = Map<string, Promise<BuildingInfo | undefined>>;\n\ninterface RoomsRow {\n\ttitle: string;\n\tcode: string;\n\taddress: string;\n}\n\ninterface GeoResponse {\n\tlat?: number;\n\tlon?: number;\n\terror?: string;\n}\n\nexport class RoomsDatasetProcessor {\n\t/**\n\t *\n\t * @param content base64 zip file content\n\t * @returns valid rooms from the given zip file\n\t * @throws InsightError if there are any fatal unrecoverable parsing errors\n\t */\n\tpublic static async getValidRooms(content: string): Promise<Room[]> {\n\t\tconst unzipped = await DatasetUtils.unzipBase64Content(content);\n\n\t\t// Get file describing the rooms\n\t\tconst roomsFile = unzipped.file(roomsHtmlFileName);\n\t\tif (roomsFile === null) {\n\t\t\tthrow new InsightError(\"No index.htm file!\");\n\t\t}\n\n\t\t// Get rooms file content\n\t\tconst roomsFileContent = await roomsFile.async(\"string\");\n\n\t\t// Parse HTML to JSON with parse5\n\t\tconst roomsFileJSON: ParseDoc = parse(roomsFileContent);\n\n\t\t// Extract address data from table in index.htm\n\t\tconst roomsTable = this.findRoomsTable(roomsFileJSON);\n\t\tconst roomsTableData = this.parseRoomsTable(roomsTable);\n\n\t\t// Check valid data\n\t\tif (roomsTableData.length === 0) {\n\t\t\tthrow new InsightError(\"No valid rooms!\");\n\t\t}\n\n\t\t// Get building info\n\t\tconst buildingInfoMap = this.createAllBuildingInfo(roomsTableData);\n\n\t\t// Parse room files deeper in zip\n\t\tconst allRooms = await this.parseRoomsFiles(unzipped, buildingInfoMap);\n\n\t\treturn allRooms;\n\t}\n\n\t/**\n\t *\n\t * @param unzipped the unzipped root folder\n\t * @param addresses room addresses from index.htm\n\t * @returns valid rooms from files\n\t */\n\tprivate static async parseRoomsFiles(unzipped: JSZip, buildingInfoMap: BuildingInfoMap): Promise<Room[]> {\n\t\tconst files = await Promise.all(\n\t\t\tObject.values(unzipped.files)\n\t\t\t\t.filter((x) => x.name.startsWith(\"campus/discover/buildings-and-classrooms\"))\n\t\t\t\t.map(async (x) => ({ name: x.name, data: await x.async(\"string\") }))\n\t\t);\n\t\tconst parsedRoomLists = await Promise.all(\n\t\t\tfiles.map(async (file): Promise<Room[]> => {\n\t\t\t\tconst fileContentParsed = parse(file.data);\n\t\t\t\tconst fileRoomCode = file.name\n\t\t\t\t\t.replaceAll(\".htm\", \"\")\n\t\t\t\t\t.split(\"/\")\n\t\t\t\t\t.find((_, idx, arr) => idx === arr.length - 1)!!;\n\t\t\t\tif (!buildingInfoMap.has(fileRoomCode)) {\n\t\t\t\t\t// console.log(\"Building info doesn't have: \" + fileRoomCode);\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\t\t\t\tconst buildingInfo = await buildingInfoMap.get(fileRoomCode)!!;\n\t\t\t\tif (buildingInfo === undefined) {\n\t\t\t\t\t// console.log(\"Building info request failed: \" + fileRoomCode);\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\t\t\t\treturn this.parseSingleRoomFile(fileContentParsed, buildingInfo);\n\t\t\t})\n\t\t);\n\t\treturn parsedRoomLists.flat();\n\t}\n\n\t/**\n\t *\n\t * @param addresses addresses, titles, and room codes from index.htm\n\t * @returns the building info map\n\t */\n\tprivate static createAllBuildingInfo(addresses: RoomsRow[]): BuildingInfoMap {\n\t\tconst map = new Map<string, Promise<BuildingInfo | undefined>>();\n\n\t\tfor (const address of addresses) {\n\t\t\t// request data\n\t\t\tconst addressRequestFn = async (): Promise<BuildingInfo | undefined> => {\n\t\t\t\tconst { lat, lon, error } = await this.getGeoLocation(address.address);\n\t\t\t\tif (error !== undefined || lat === undefined || lon === undefined) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ttitle: address.title,\n\t\t\t\t\tcode: address.code,\n\t\t\t\t\taddress: address.address,\n\t\t\t\t\tlat: lat,\n\t\t\t\t\tlon: lon,\n\t\t\t\t};\n\t\t\t};\n\t\t\tmap.set(address.code, addressRequestFn());\n\t\t}\n\n\t\treturn map;\n\t}\n\n\t/**\n\t *\n\t * @param content parsed file content\n\t * @param addresses rooms and their addresses\n\t * @returns room from file or undefined if file is invalid\n\t */\n\tprivate static parseSingleRoomFile(content: ParseDoc, buildingInfo: BuildingInfo): Room[] {\n\t\tlet roomsTable: Element;\n\t\ttry {\n\t\t\troomsTable = this.findRoomsTable(content);\n\t\t} catch (_e) {\n\t\t\t// console.log(\"Could not find rooms table in: \" + roomCode);\n\t\t\treturn [];\n\t\t}\n\t\tconst rooms: Room[] = [];\n\t\tthis.forAllNodesOfType(roomsTable, \"tr\", (tr) => {\n\t\t\ttry {\n\t\t\t\tconst room = this.parseSingleRoomInRoomFile(tr as Element, buildingInfo);\n\t\t\t\tif (room !== undefined) {\n\t\t\t\t\trooms.push(room);\n\t\t\t\t}\n\t\t\t} catch (_e) {\n\t\t\t\t// Moving on ...\n\t\t\t}\n\t\t});\n\t\treturn rooms;\n\t}\n\n\t/**\n\t *\n\t * @param tr the tr element inside the table body contianing the tds to look for attributes on\n\t * @param buildingInfo the building info for the current building\n\t * @returns a room from this tr and the given building info\n\t */\n\tprivate static parseSingleRoomInRoomFile(tr: Element, buildingInfo: BuildingInfo): Room | undefined {\n\t\t// Child is a tr containing the tds with data\n\t\tlet seats: number | undefined;\n\t\tlet furniture: string | undefined;\n\t\tlet type: string | undefined;\n\t\tlet roomNumber: string | undefined;\n\t\tlet href: string | undefined;\n\t\tfor (const child of tr.childNodes) {\n\t\t\tif (this.tableClassIsValid(child)) {\n\t\t\t\t// Check attrs for different pieces of data\n\t\t\t\tif (this.classContains(child, \"views-field-field-room-capacity\")) {\n\t\t\t\t\tseats = parseInt(this.getInternalText(child) ?? \"?\", 10);\n\t\t\t\t} else if (this.classContains(child, \"views-field-field-room-furniture\")) {\n\t\t\t\t\tfurniture = this.getInternalText(child);\n\t\t\t\t} else if (this.classContains(child, \"views-field-field-room-type\")) {\n\t\t\t\t\ttype = this.getInternalText(child);\n\t\t\t\t} else if (this.classContains(child, \"views-field-field-room-number\")) {\n\t\t\t\t\troomNumber = this.getInternalText(this.getNamedChild(child, \"a\") as Element);\n\t\t\t\t} else if (this.classContains(child, \"views-field-nothing\")) {\n\t\t\t\t\thref = this.getAttribute(this.getNamedChild(child, \"a\"), \"href\")?.value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tseats: seats!!,\n\t\t\tfurniture: furniture?.trim()!!,\n\t\t\ttype: type?.trim()!!,\n\t\t\tnumber: roomNumber?.trim()!!,\n\t\t\taddress: buildingInfo.address,\n\t\t\tlat: buildingInfo.lat,\n\t\t\tlon: buildingInfo.lon,\n\t\t\tfullname: buildingInfo.title,\n\t\t\tshortname: buildingInfo.code,\n\t\t\thref: href?.trim()!!,\n\t\t\tname: buildingInfo.code + \"_\" + roomNumber?.trim()!!,\n\t\t};\n\t}\n\t/**\n\t *\n\t * @param parent parent node to search\n\t * @param type type of child to match\n\t * @param fn function to apply\n\t */\n\tprivate static forAllNodesOfType(\n\t\tparent: ParseChildNode | undefined,\n\t\ttype: string,\n\t\tfn: (child: ParseChildNode) => void\n\t): void {\n\t\t(parent as Element | undefined)?.childNodes?.forEach((childNode) => {\n\t\t\tif (childNode.nodeName === type) {\n\t\t\t\tfn(childNode);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t *\n\t * @param x the element to search\n\t * @param attrName the attribute to find\n\t * @returns the named attribute or undefined if not present\n\t */\n\tprivate static getAttribute(x: ParseChildNode | undefined, attrName: string): Attribute | undefined {\n\t\treturn (x as Element | undefined)?.attrs?.find((y) => y.name === attrName);\n\t}\n\n\t/**\n\t *\n\t * @param x the node whos children to check\n\t * @param name the name of the node to search for\n\t * @returns the child with the given name or undefined if not found\n\t */\n\tprivate static getNamedChild(x: Element, name: string): ParseChildNode | undefined {\n\t\treturn x.childNodes.find((y) => y.nodeName === name);\n\t}\n\n\t/**\n\t *\n\t * @param x the element to retrieve internal text of\n\t * @returns string if element has a #text child, undefined otherwise\n\t */\n\tprivate static getInternalText(x: Element | undefined): string | undefined {\n\t\tconst textNode = x?.childNodes.find((p) => p.nodeName === \"#text\") as TextNode | undefined;\n\t\treturn textNode?.value;\n\t}\n\n\t/**\n\t *\n\t * @param x the child node to check\n\t * @returns the class attribute of the child node if it exists, false otherwise\n\t */\n\tprivate static getClass(x: ParseChildNode): Attribute | undefined {\n\t\treturn this.getAttribute(x, \"class\");\n\t}\n\n\t/**\n\t *\n\t * @param x the attribute to check\n\t * @returns whether this is a valid class signature of a table item\n\t */\n\tprivate static tableClassIsValid(x: ParseChildNode | undefined): x is Element {\n\t\tif (x === undefined || x.nodeName !== \"td\") {\n\t\t\treturn false;\n\t\t}\n\t\tconst xClass = this.getClass(x);\n\t\treturn xClass?.value.includes(\"views-field\") === true;\n\t}\n\n\t/**\n\t *\n\t * @param x the child node to check\n\t * @param values the values to check if in class\n\t * @returns whether all values are in the class of the given item\n\t */\n\tprivate static classContains(x: ParseChildNode, ...values: string[]): boolean {\n\t\tconst xClass = this.getClass(x);\n\t\tif (xClass === undefined) {\n\t\t\treturn false;\n\t\t}\n\t\treturn values.map((value) => xClass.value.includes(value)).reduce((prev, curr) => prev && curr, true);\n\t}\n\n\t/**\n\t *\n\t * @param roomsTable the rooms table in index.htm\n\t * @returns valid rooms rows with info\n\t */\n\tprivate static parseRoomsTable(roomsTable: Element): RoomsRow[] {\n\t\treturn (\n\t\t\troomsTable.childNodes\n\t\t\t\t// Ensure child nodes present and cast\n\t\t\t\t.map((trChildUncast) => {\n\t\t\t\t\tconst trChildCast = trChildUncast as Element;\n\t\t\t\t\tif (trChildCast.childNodes === undefined) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t\treturn trChildCast;\n\t\t\t\t})\n\t\t\t\t// Remove ones without child nodes\n\t\t\t\t.filter((child) => child !== undefined)\n\t\t\t\t// Remove ones that aren't <tr>\n\t\t\t\t.filter((child) => child?.nodeName === \"tr\")\n\t\t\t\t// Map to undefined if internal format wrong, otherwise map to RoomsRow\n\t\t\t\t.map((trChild) => this.parseSingleTr(trChild!!))\n\t\t\t\t// Remove invalid <tr>'s\n\t\t\t\t.filter((x) => x !== undefined)\n\t\t\t\t.map((x) => x!!)\n\t\t);\n\t}\n\n\t/**\n\t *\n\t * @param tr the <tr> entry in the rooms index.htm table\n\t * @returns a RoomsRow if it is valid, undefined otherwise\n\t */\n\tprivate static parseSingleTr(tr: Element): RoomsRow | undefined {\n\t\tlet roomTitle: string | undefined;\n\t\tlet roomAddress: string | undefined;\n\t\tlet roomCode: string | undefined;\n\t\tfor (const child of tr.childNodes) {\n\t\t\tif (this.tableClassIsValid(child)) {\n\t\t\t\t// Check attrs for different pieces of data\n\t\t\t\tif (this.classContains(child, \"views-field-title\")) {\n\t\t\t\t\troomTitle = this.getInternalText(this.getNamedChild(child, \"a\") as Element)?.trim();\n\t\t\t\t} else if (this.classContains(child, \"views-field-field-building-address\")) {\n\t\t\t\t\troomAddress = this.getInternalText(child)?.trim();\n\t\t\t\t} else if (this.classContains(child, \"views-field-field-building-code\")) {\n\t\t\t\t\troomCode = this.getInternalText(child)?.trim();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif ([roomTitle, roomAddress, roomCode].filter((x) => x === undefined).length === 0) {\n\t\t\treturn {\n\t\t\t\ttitle: roomTitle!!,\n\t\t\t\taddress: roomAddress!!,\n\t\t\t\tcode: roomCode!!,\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/**\n\t *\n\t * @param document document to search for rooms table\n\t * @returns rooms table element\n\t * @throws InsightError if table not found\n\t */\n\tprivate static findRoomsTable(document: ParseDoc): Element {\n\t\tfor (const child of document.childNodes) {\n\t\t\tconst res = this.findTableInChild(child, false);\n\t\t\tif (res !== undefined) {\n\t\t\t\treturn res as Element;\n\t\t\t}\n\t\t}\n\t\tthrow new InsightError(\"Could not find rooms table\");\n\t}\n\n\t/**\n\t *\n\t * @param child child to search\n\t * @param seenTable whether this child is a child of a table\n\t * @returns child node of table if found, else undefined\n\t */\n\tprivate static findTableInChild(child: ParseChildNode, seenTable: boolean): ParseChildNode | undefined {\n\t\t// Check if table is found\n\t\tif (seenTable && child.nodeName === \"tbody\" && Array.isArray(child.childNodes) && child.childNodes.length > 0) {\n\t\t\tfor (const trChild of child.childNodes) {\n\t\t\t\tif (\n\t\t\t\t\ttrChild.nodeName === \"tr\" &&\n\t\t\t\t\ttrChild.childNodes.find(\n\t\t\t\t\t\t(tdChild) =>\n\t\t\t\t\t\t\ttdChild.nodeName === \"td\" &&\n\t\t\t\t\t\t\ttdChild.attrs.find((attr) => attr.name === \"class\" && attr.value.includes(\"views-field\"))\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\treturn child;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Check children for table\n\t\tconst children = (child as any).childNodes;\n\t\tif (Array.isArray(children)) {\n\t\t\tfor (const x of children) {\n\t\t\t\tconst res = this.findTableInChild(x, seenTable || x.nodeName === \"table\");\n\t\t\t\tif (res !== undefined) {\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/**\n\t *\n\t * @param address the unzipped root folder\n\t * @param address room addresses from index.htm\n\t * @returns GeoResponse object that has lat and lon or error\n\t */\n\tpublic static async getGeoLocation(address: string): Promise<GeoResponse> {\n\t\tconst encodedAddress = encodeURIComponent(address);\n\t\tconst url = `http://cs310.students.cs.ubc.ca:11316/api/v1/project_team085/${encodedAddress}`;\n\n\t\tconst response = await (async (): Promise<any> =>\n\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\tconst req = http.get(url);\n\t\t\t\treq.on(\"response\", (res) => resolve(res));\n\n\t\t\t\treq.on(\"error\", (err) => reject(err));\n\n\t\t\t\treq.end();\n\t\t\t}))();\n\n\t\tlet body = \"\";\n\t\tfor await (const chunk of response) {\n\t\t\tbody += chunk;\n\t\t}\n\t\treturn JSON.parse(body);\n\t}\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"62053d38ed17ae3a5f49cd7546f4a4a6a5588c6c","contentHash":"a9c00b78753a87b23753f03e06482f0b39fd7d3b4805c37cab8c37e34ce2a2eb"}}